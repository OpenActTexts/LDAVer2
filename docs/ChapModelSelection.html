<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Model Selection | Loss Data Analytics   Second Edition</title>
  <meta name="description" content="Loss Data Analytics is an interactive, online, freely available text. - The online version will contain many interactive objects (quizzes, computer demonstrations, interactive graphs, video, and the like) to promote deeper learning. - A subset of the book will be available in pdf format for low-cost printing. - The online text will be available in multiple languages to promote access to a worldwide audience." />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Model Selection | Loss Data Analytics   Second Edition" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Loss Data Analytics is an interactive, online, freely available text. - The online version will contain many interactive objects (quizzes, computer demonstrations, interactive graphs, video, and the like) to promote deeper learning. - A subset of the book will be available in pdf format for low-cost printing. - The online text will be available in multiple languages to promote access to a worldwide audience." />
  <meta name="github-repo" content="https://github.com/OpenActTexts/LDAVer2" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Model Selection | Loss Data Analytics   Second Edition" />
  
  <meta name="twitter:description" content="Loss Data Analytics is an interactive, online, freely available text. - The online version will contain many interactive objects (quizzes, computer demonstrations, interactive graphs, video, and the like) to promote deeper learning. - A subset of the book will be available in pdf format for low-cost printing. - The online text will be available in multiple languages to promote access to a worldwide audience." />
  

<meta name="author" content="An open text authored by the Actuarial Community" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ChapClaimSeverity.html"/>
<link rel="next" href="ChapAggLossModels.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YKJD3496MG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YKJD3496MG');
</script>


<!-- Mathjax Version 2-->
<script type='text/x-mathjax-config'>
		MathJax.Hub.Config({
			extensions: ['tex2jax.js'],
			jax: ['input/TeX', 'output/HTML-CSS'],
			tex2jax: {
				inlineMath: [ ['$','$'], ['\\(','\\)'] ],
				displayMath: [ ['$$','$$'], ['\\[','\\]'] ],
				processEscapes: true
			},
			'HTML-CSS': { availableFonts: ['TeX'] }
		});
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_HTML"> </script>


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/survey-jquery/survey.jquery.min.js"></script>
<link href="https://unpkg.com/survey-jquery/modern.min.css" type="text/css" rel="stylesheet">
<script src="https://unpkg.com/showdown/dist/showdown.min.js"></script>


<script>
function markdownConverterEWF() {  
//Create showdown markdown converter
var converter = new showdown.Converter();
converter.setOption('ghCompatibleHeaderId', true);
survey
    .onTextMarkdown
    .add(function (survey, options) {
        //convert the markdown text to html
        var str = converter.makeHtml(options.text);
        //remove root paragraphs <p></p>
        str = str.substring(3);
        str = str.substring(0, str.length - 4);
        //set html
        options.html = str;
        MathJax.Hub.Queue(['Typeset',MathJax.Hub, 'options']);
    });  
};

// Quiz Header info
const jsonHeader = { 
    showProgressBar: "bottom",
    showTimerPanel: "none",
    maxTimeToFinishPage: 10000,
    maxTimeToFinish: 25000,
    firstPageIsStarted: true,
    startSurveyText: "Start Quiz" //,
//    title: "Does This Make Sense?"
}


// One and Two question quizzes
function jsonSummary1EWF(json) {  
let jsonEnd1 = { 
completedHtml: 
json["pages"][1]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][1]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][1]["questions"][0]["correctAnswer"]
};  
return jsonEnd1;
};


function jsonSummary2EWF(json) {  
let jsonEnd2 = { 
completedHtml: 
json["pages"][1]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][1]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][1]["questions"][0]["correctAnswer"]
+"<br>"+
json["pages"][2]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][2]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][2]["questions"][0]["correctAnswer"]
};  
return jsonEnd2;
};

// Three, four, and five question quizzes
function jsonSummary3EWF(json) {  
let jsonEnd3 = { 
completedHtml: 
json["pages"][1]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][1]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][1]["questions"][0]["correctAnswer"]
+"<br>"+
json["pages"][2]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][2]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][2]["questions"][0]["correctAnswer"]
+"<br>"+
json["pages"][3]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][3]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][3]["questions"][0]["correctAnswer"]
};  
return jsonEnd3;
};

function jsonSummary4EWF(json) {  
jsonEnd4 = jsonSummary3EWF(json);
jsonEnd4.completedHtml = jsonEnd4.completedHtml +  
"<br>"+
json["pages"][4]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][4]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][4]["questions"][0]["correctAnswer"]
;  
return jsonEnd4;
};

function jsonSummary5EWF(json) {  
jsonEnd5 = jsonSummary4EWF(json);
jsonEnd5.completedHtml = jsonEnd5.completedHtml +  
"<br>"+
json["pages"][5]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][5]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][5]["questions"][0]["correctAnswer"]
;  
return jsonEnd5;
};

function jsonSummary6EWF(json) {  
jsonEnd6 = jsonSummary5EWF(json);
jsonEnd6.completedHtml = jsonEnd6.completedHtml +  
"<br>"+
json["pages"][6]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][6]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][6]["questions"][0]["correctAnswer"]
;  
return jsonEnd6;
};

function jsonSummary7EWF(json) {  
jsonEnd7 = jsonSummary6EWF(json);
jsonEnd7.completedHtml = jsonEnd7.completedHtml +  
"<br>"+
json["pages"][7]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][7]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][7]["questions"][0]["correctAnswer"]
;  
return jsonEnd7;
};

function jsonSummary8EWF(json) {  
jsonEnd8 = jsonSummary7EWF(json);
jsonEnd8.completedHtml = jsonEnd8.completedHtml +  
"<br>"+
json["pages"][8]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][8]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][8]["questions"][0]["correctAnswer"]
;  
return jsonEnd8;
};

function jsonSummary9EWF(json) {  
jsonEnd9 = jsonSummary8EWF(json);
jsonEnd9.completedHtml = jsonEnd9.completedHtml +  
"<br>"+
json["pages"][9]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][9]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][9]["questions"][0]["correctAnswer"]
;  
return jsonEnd9;
};


function jsonSummary10EWF(json) {  
jsonEnd10 = jsonSummary9EWF(json);
jsonEnd10.completedHtml = jsonEnd10.completedHtml +  
"<br>"+
json["pages"][10]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][10]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][10]["questions"][0]["correctAnswer"]
;  
return jsonEnd10;
};


function jsonSummary11EWF(json) {  
jsonEnd11 = jsonSummary10EWF(json);
jsonEnd11.completedHtml = jsonEnd11.completedHtml +  
"<br>"+
json["pages"][11]["questions"][0]["name"]+ "<br>"+
"<i>Question: </i>"+json["pages"][11]["questions"][0]["title"]+"<br>"+
"<i>Answer: </i>"+json["pages"][11]["questions"][0]["correctAnswer"]
;  
return jsonEnd11;
};

Survey.StylesManager.applyTheme("modern");

</script>  
<!-- This completes the code for the quizzes -->

<!-- Various toggle functions used throughout --> 
<script language="javascript">
function toggle(id1,id2) {
	var ele = document.getElementById(id1); var text = document.getElementById(id2);
	if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Solution";}
		else {ele.style.display = "block"; text.innerHTML = "Hide Solution";}}
function togglecode(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show R Code";}
      else {ele.style.display = "block"; text.innerHTML = "Hide R Code";}}
function toggleEX(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Example";}
      else {ele.style.display = "block"; text.innerHTML = "Hide Example";}}
function toggleTheory(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Theory";}
      else {ele.style.display = "block"; text.innerHTML = "Hide Theory";}}
function toggleQuiz(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Quiz Solution";}
      else {ele.style.display = "block"; text.innerHTML = "Hide Quiz Solution";}}      
</script>

<!-- A few functions for revealing definitions -->
<script language="javascript">
<!--   $( function() {
    $("#tabs").tabs();
  } ); -->

$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});

$(document).ready(function(){
    $('[data-toggle="popover"]').popover(); 
});
</script>

<script language="javascript">
function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>

<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="Format/style.css" type="text/css" />
<link rel="stylesheet" href="includeWebex/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Loss Data Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reviewers"><i class="fa fa-check"></i>Reviewers</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-collaborators"><i class="fa fa-check"></i>Other Collaborators</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#version-number"><i class="fa fa-check"></i>Version Number</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#for-our-readers"><i class="fa fa-check"></i>For our Readers</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="ChapIntro.html"><a href="ChapIntro.html"><i class="fa fa-check"></i><b>1</b> Loss Data and Insurance Activities</a>
<ul>
<li class="chapter" data-level="1.1" data-path="ChapIntro.html"><a href="ChapIntro.html#S:Intro"><i class="fa fa-check"></i><b>1.1</b> Data Driven Insurance Activities</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="ChapIntro.html"><a href="ChapIntro.html#nature-and-relevance-of-insurance"><i class="fa fa-check"></i><b>1.1.1</b> Nature and Relevance of Insurance</a></li>
<li class="chapter" data-level="1.1.2" data-path="ChapIntro.html"><a href="ChapIntro.html#S:DataDriven"><i class="fa fa-check"></i><b>1.1.2</b> Why Data Driven?</a></li>
<li class="chapter" data-level="1.1.3" data-path="ChapIntro.html"><a href="ChapIntro.html#S:InsProcesses"><i class="fa fa-check"></i><b>1.1.3</b> Insurance Processes</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="ChapIntro.html"><a href="ChapIntro.html#S:PredModApps"><i class="fa fa-check"></i><b>1.2</b> Insurance Company Operations</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="ChapIntro.html"><a href="ChapIntro.html#initiating-insurance"><i class="fa fa-check"></i><b>1.2.1</b> Initiating Insurance</a></li>
<li class="chapter" data-level="1.2.2" data-path="ChapIntro.html"><a href="ChapIntro.html#renewing-insurance"><i class="fa fa-check"></i><b>1.2.2</b> Renewing Insurance</a></li>
<li class="chapter" data-level="1.2.3" data-path="ChapIntro.html"><a href="ChapIntro.html#claims-and-product-management"><i class="fa fa-check"></i><b>1.2.3</b> Claims and Product Management</a></li>
<li class="chapter" data-level="1.2.4" data-path="ChapIntro.html"><a href="ChapIntro.html#S:Reserving"><i class="fa fa-check"></i><b>1.2.4</b> Loss Reserving</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="ChapIntro.html"><a href="ChapIntro.html#S:LGPIF"><i class="fa fa-check"></i><b>1.3</b> Case Study: Wisconsin Property Fund</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="ChapIntro.html"><a href="ChapIntro.html#S:OutComes"><i class="fa fa-check"></i><b>1.3.1</b> Fund Claims Variables: Frequency and Severity</a></li>
<li class="chapter" data-level="1.3.2" data-path="ChapIntro.html"><a href="ChapIntro.html#S:FundVariables"><i class="fa fa-check"></i><b>1.3.2</b> Fund Rating Variables</a></li>
<li class="chapter" data-level="1.3.3" data-path="ChapIntro.html"><a href="ChapIntro.html#fund-operations"><i class="fa fa-check"></i><b>1.3.3</b> Fund Operations</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="ChapIntro.html"><a href="ChapIntro.html#exercises"><i class="fa fa-check"></i><b>1.4</b> Exercises</a></li>
<li class="chapter" data-level="1.5" data-path="ChapIntro.html"><a href="ChapIntro.html#Intro-further-reading-and-resources"><i class="fa fa-check"></i><b>1.5</b> Further Resources and Contributors</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html"><i class="fa fa-check"></i><b>2</b> Introduction to Data Analytics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec21"><i class="fa fa-check"></i><b>2.1</b> Elements of Data Analytics</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#key-data-analytic-concepts"><i class="fa fa-check"></i><b>2.1.1</b> Key Data Analytic Concepts</a></li>
<li class="chapter" data-level="2.1.2" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec212"><i class="fa fa-check"></i><b>2.1.2</b> Data versus Algorithmic Modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec22"><i class="fa fa-check"></i><b>2.2</b> Data Analysis Process</a></li>
<li class="chapter" data-level="2.3" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec23"><i class="fa fa-check"></i><b>2.3</b> Single Variable Analytics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec231"><i class="fa fa-check"></i><b>2.3.1</b> Variable Types</a></li>
<li class="chapter" data-level="2.3.2" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec232"><i class="fa fa-check"></i><b>2.3.2</b> Exploratory versus Confirmatory</a></li>
<li class="chapter" data-level="2.3.3" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec233"><i class="fa fa-check"></i><b>2.3.3</b> Model Construction</a></li>
<li class="chapter" data-level="2.3.4" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec234"><i class="fa fa-check"></i><b>2.3.4</b> Model Selection</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec24"><i class="fa fa-check"></i><b>2.4</b> Analytics with Many Variables</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#supervised-and-unsupervised-learning"><i class="fa fa-check"></i><b>2.4.1</b> Supervised and Unsupervised Learning</a></li>
<li class="chapter" data-level="2.4.2" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#algorithmic-modeling"><i class="fa fa-check"></i><b>2.4.2</b> Algorithmic Modeling</a></li>
<li class="chapter" data-level="2.4.3" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#data-modeling"><i class="fa fa-check"></i><b>2.4.3</b> Data Modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec25"><i class="fa fa-check"></i><b>2.5</b> Data</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#data-types"><i class="fa fa-check"></i><b>2.5.1</b> Data Types</a></li>
<li class="chapter" data-level="2.5.2" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#data-structures-and-storage"><i class="fa fa-check"></i><b>2.5.2</b> Data Structures and Storage</a></li>
<li class="chapter" data-level="2.5.3" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#data-cleaning"><i class="fa fa-check"></i><b>2.5.3</b> Data Cleaning</a></li>
<li class="chapter" data-level="2.5.4" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec254"><i class="fa fa-check"></i><b>2.5.4</b> Big Data Analysis</a></li>
<li class="chapter" data-level="2.5.5" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#ethical-issues"><i class="fa fa-check"></i><b>2.5.5</b> Ethical Issues</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec26"><i class="fa fa-check"></i><b>2.6</b> Further Resources and Contributors</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#S:Sec261"><i class="fa fa-check"></i><b>2.6.1</b> Technical Supplement: Multivariate Exploratory Analysis</a></li>
<li class="chapter" data-level="2.6.2" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#tree-based-models"><i class="fa fa-check"></i><b>2.6.2</b> Tree-based Models</a></li>
<li class="chapter" data-level="2.6.3" data-path="ChapDataAnalytics.html"><a href="ChapDataAnalytics.html#technical-supplement-some-r-functions"><i class="fa fa-check"></i><b>2.6.3</b> Technical Supplement: Some R Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html"><i class="fa fa-check"></i><b>3</b> Frequency Modeling</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec31"><i class="fa fa-check"></i><b>3.1</b> Frequency Distributions</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec311"><i class="fa fa-check"></i><b>3.1.1</b> How Frequency Augments Severity Information</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec32"><i class="fa fa-check"></i><b>3.2</b> Basic Frequency Distributions</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec321"><i class="fa fa-check"></i><b>3.2.1</b> Foundations</a></li>
<li class="chapter" data-level="3.2.2" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec322"><i class="fa fa-check"></i><b>3.2.2</b> Moment and Probability Generating Functions</a></li>
<li class="chapter" data-level="3.2.3" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec323"><i class="fa fa-check"></i><b>3.2.3</b> Important Frequency Distributions</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec33"><i class="fa fa-check"></i><b>3.3</b> The (<em>a</em>, <em>b</em>, 0) Class</a></li>
<li class="chapter" data-level="3.4" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec34"><i class="fa fa-check"></i><b>3.4</b> Estimating Frequency Distributions</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec341"><i class="fa fa-check"></i><b>3.4.1</b> Parameter Estimation</a></li>
<li class="chapter" data-level="3.4.2" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec342"><i class="fa fa-check"></i><b>3.4.2</b> Frequency Distributions MLE</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec35"><i class="fa fa-check"></i><b>3.5</b> Other Frequency Distributions</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec351"><i class="fa fa-check"></i><b>3.5.1</b> Zero Truncation or Modification</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec36"><i class="fa fa-check"></i><b>3.6</b> Mixture Distributions</a></li>
<li class="chapter" data-level="3.7" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec37"><i class="fa fa-check"></i><b>3.7</b> Real Data Example</a></li>
<li class="chapter" data-level="3.8" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec38"><i class="fa fa-check"></i><b>3.8</b> Exercises</a></li>
<li class="chapter" data-level="3.9" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:Sec39"><i class="fa fa-check"></i><b>3.9</b> Further Resources and Contributors</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="ChapFrequency-Modeling.html"><a href="ChapFrequency-Modeling.html#S:rcode"><i class="fa fa-check"></i><b>3.9.1</b> TS 3.A. R Code for Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ChapSeverity.html"><a href="ChapSeverity.html"><i class="fa fa-check"></i><b>4</b> Modeling Loss Severity</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec41"><i class="fa fa-check"></i><b>4.1</b> Basic Distributional Quantities</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec411"><i class="fa fa-check"></i><b>4.1.1</b> Moments and Moment Generating Functions</a></li>
<li class="chapter" data-level="4.1.2" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec412"><i class="fa fa-check"></i><b>4.1.2</b> Quantiles</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec42"><i class="fa fa-check"></i><b>4.2</b> Continuous Distributions for Modeling Loss Severity</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec421"><i class="fa fa-check"></i><b>4.2.1</b> Gamma Distribution</a></li>
<li class="chapter" data-level="4.2.2" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec422"><i class="fa fa-check"></i><b>4.2.2</b> Pareto Distribution</a></li>
<li class="chapter" data-level="4.2.3" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec423"><i class="fa fa-check"></i><b>4.2.3</b> Weibull Distribution</a></li>
<li class="chapter" data-level="4.2.4" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec424"><i class="fa fa-check"></i><b>4.2.4</b> The Generalized Beta Distribution of the Second Kind</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec43"><i class="fa fa-check"></i><b>4.3</b> Methods of Creating New Distributions</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec431"><i class="fa fa-check"></i><b>4.3.1</b> Functions of Random Variables and their Distributions</a></li>
<li class="chapter" data-level="4.3.2" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec432"><i class="fa fa-check"></i><b>4.3.2</b> Mixture Distributions for Severity</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec44"><i class="fa fa-check"></i><b>4.4</b> Estimating Loss Distributions</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec441"><i class="fa fa-check"></i><b>4.4.1</b> Nonparametric Estimation</a></li>
<li class="chapter" data-level="4.4.2" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec442"><i class="fa fa-check"></i><b>4.4.2</b> Parametric Estimation</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec45"><i class="fa fa-check"></i><b>4.5</b> Exercises with a Practical Focus</a></li>
<li class="chapter" data-level="4.6" data-path="ChapSeverity.html"><a href="ChapSeverity.html#S:Sec46"><i class="fa fa-check"></i><b>4.6</b> Further Resources and Contributors</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html"><i class="fa fa-check"></i><b>5</b> Modeling Claim Severity</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec51"><i class="fa fa-check"></i><b>5.1</b> Coverage Modifications</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec511"><i class="fa fa-check"></i><b>5.1.1</b> Policy Deductibles</a></li>
<li class="chapter" data-level="5.1.2" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec512"><i class="fa fa-check"></i><b>5.1.2</b> Policy Limits</a></li>
<li class="chapter" data-level="5.1.3" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec513"><i class="fa fa-check"></i><b>5.1.3</b> Coinsurance and Inflation</a></li>
<li class="chapter" data-level="5.1.4" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec514"><i class="fa fa-check"></i><b>5.1.4</b> Reinsurance</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec52"><i class="fa fa-check"></i><b>5.2</b> Parametric Estimation using Modified Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec521"><i class="fa fa-check"></i><b>5.2.1</b> Parametric Estimation using Grouped Data</a></li>
<li class="chapter" data-level="5.2.2" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec522"><i class="fa fa-check"></i><b>5.2.2</b> Censored Data</a></li>
<li class="chapter" data-level="5.2.3" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec523"><i class="fa fa-check"></i><b>5.2.3</b> Truncated Data</a></li>
<li class="chapter" data-level="5.2.4" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec524"><i class="fa fa-check"></i><b>5.2.4</b> Parametric Estimation using Censored and Truncated Data</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec53"><i class="fa fa-check"></i><b>5.3</b> Nonparametric Estimation using Modified Data</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec531"><i class="fa fa-check"></i><b>5.3.1</b> Grouped Data</a></li>
<li class="chapter" data-level="5.3.2" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec532"><i class="fa fa-check"></i><b>5.3.2</b> Plug-in Principle</a></li>
<li class="chapter" data-level="5.3.3" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec533"><i class="fa fa-check"></i><b>5.3.3</b> Right-Censored Empirical Distribution Function</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="ChapClaimSeverity.html"><a href="ChapClaimSeverity.html#S:Sec54"><i class="fa fa-check"></i><b>5.4</b> Further Resources and Contributors</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html"><i class="fa fa-check"></i><b>6</b> Model Selection</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html#S:Sec61"><i class="fa fa-check"></i><b>6.1</b> Tools for Model Selection and Diagnostics</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html#S:Sec611"><i class="fa fa-check"></i><b>6.1.1</b> Graphical Comparison of Distributions</a></li>
<li class="chapter" data-level="6.1.2" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html#S:Sec612"><i class="fa fa-check"></i><b>6.1.2</b> Statistical Comparison of Distributions</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html#S:Sec62"><i class="fa fa-check"></i><b>6.2</b> Iterative Model Selection</a></li>
<li class="chapter" data-level="6.3" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html#S:Sec63"><i class="fa fa-check"></i><b>6.3</b> Model Selection Based on a Training Dataset</a></li>
<li class="chapter" data-level="6.4" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html#S:Sec64"><i class="fa fa-check"></i><b>6.4</b> Model Selection Based on a Test Dataset</a></li>
<li class="chapter" data-level="6.5" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html#S:Sec65"><i class="fa fa-check"></i><b>6.5</b> Model Selection Based on Cross-Validation</a></li>
<li class="chapter" data-level="6.6" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html#S:Sec66"><i class="fa fa-check"></i><b>6.6</b> Model Selection for Modified Data</a></li>
<li class="chapter" data-level="6.7" data-path="ChapModelSelection.html"><a href="ChapModelSelection.html#further-resources-and-contributors"><i class="fa fa-check"></i><b>6.7</b> Further Resources and Contributors</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html"><i class="fa fa-check"></i><b>7</b> Aggregate Loss Models</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec71"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec72"><i class="fa fa-check"></i><b>7.2</b> Individual Risk Model</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec721"><i class="fa fa-check"></i><b>7.2.1</b> Moments and Distribution</a></li>
<li class="chapter" data-level="7.2.2" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec722"><i class="fa fa-check"></i><b>7.2.2</b> Aggregate Loss Distribution</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec73"><i class="fa fa-check"></i><b>7.3</b> Collective Risk Model</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec731"><i class="fa fa-check"></i><b>7.3.1</b> Moments and Distribution</a></li>
<li class="chapter" data-level="7.3.2" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec732"><i class="fa fa-check"></i><b>7.3.2</b> Stop-loss Insurance</a></li>
<li class="chapter" data-level="7.3.3" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec733"><i class="fa fa-check"></i><b>7.3.3</b> Closed-form Distributions</a></li>
<li class="chapter" data-level="7.3.4" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec734"><i class="fa fa-check"></i><b>7.3.4</b> Tweedie Distribution</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec74"><i class="fa fa-check"></i><b>7.4</b> Computing the Aggregate Claims Distribution</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec741"><i class="fa fa-check"></i><b>7.4.1</b> Recursive Method</a></li>
<li class="chapter" data-level="7.4.2" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec742"><i class="fa fa-check"></i><b>7.4.2</b> Simulation</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec75"><i class="fa fa-check"></i><b>7.5</b> Effects of Coverage Modifications</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec751"><i class="fa fa-check"></i><b>7.5.1</b> Impact of Exposure on Frequency</a></li>
<li class="chapter" data-level="7.5.2" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec752"><i class="fa fa-check"></i><b>7.5.2</b> Impact of Deductibles on Claim Frequency</a></li>
<li class="chapter" data-level="7.5.3" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec753"><i class="fa fa-check"></i><b>7.5.3</b> Impact of Policy Modifications on Aggregate Claims</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#S:Sec76"><i class="fa fa-check"></i><b>7.6</b> Further Resources and Contributors</a>
<ul>
<li class="chapter" data-level="" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#ts-7.a.1.-individual-risk-model-properties"><i class="fa fa-check"></i>TS 7.A.1. Individual Risk Model Properties</a></li>
<li class="chapter" data-level="" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#ts-7.a.2.-relationship-between-probability-generating-functions-of-x_i-and-x_it"><i class="fa fa-check"></i>TS 7.A.2. Relationship Between Probability Generating Functions of <span class="math inline">\(X_i\)</span> and <span class="math inline">\(X_i^T\)</span></a></li>
<li class="chapter" data-level="" data-path="ChapAggLossModels.html"><a href="ChapAggLossModels.html#ts-7.a.3.-moment-generating-function-of-aggregate-loss-s_n-in-example-7.3.9"><i class="fa fa-check"></i>TS 7.A.3. Moment Generating Function of Aggregate Loss <span class="math inline">\(S_N\)</span> in Example 7.3.9</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ChapSimulation.html"><a href="ChapSimulation.html"><i class="fa fa-check"></i><b>8</b> Simulation and Resampling</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec81"><i class="fa fa-check"></i><b>8.1</b> Random Number Generation</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec811"><i class="fa fa-check"></i><b>8.1.1</b> Generating Independent Uniform Observations</a></li>
<li class="chapter" data-level="8.1.2" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec812"><i class="fa fa-check"></i><b>8.1.2</b> Inverse Transform Method</a></li>
<li class="chapter" data-level="8.1.3" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec813"><i class="fa fa-check"></i><b>8.1.3</b> Ready-made Random Number Generators</a></li>
<li class="chapter" data-level="8.1.4" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec814"><i class="fa fa-check"></i><b>8.1.4</b> Simulating from Complex Distributions</a></li>
<li class="chapter" data-level="8.1.5" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec815"><i class="fa fa-check"></i><b>8.1.5</b> Importance Sampling</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec82"><i class="fa fa-check"></i><b>8.2</b> Computing Distribution Parameters</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec821"><i class="fa fa-check"></i><b>8.2.1</b> Simulating Parameters</a></li>
<li class="chapter" data-level="8.2.2" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec822"><i class="fa fa-check"></i><b>8.2.2</b> Determining the Number of Simulations</a></li>
<li class="chapter" data-level="8.2.3" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec823"><i class="fa fa-check"></i><b>8.2.3</b> Simulation and Statistical Inference</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec83"><i class="fa fa-check"></i><b>8.3</b> Bootstrapping and Resampling</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec831"><i class="fa fa-check"></i><b>8.3.1</b> Bootstrap Foundations</a></li>
<li class="chapter" data-level="8.3.2" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec832"><i class="fa fa-check"></i><b>8.3.2</b> Bootstrap Precision: Bias, Standard Deviation, and Mean Square Error</a></li>
<li class="chapter" data-level="8.3.3" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec833"><i class="fa fa-check"></i><b>8.3.3</b> Confidence Intervals</a></li>
<li class="chapter" data-level="8.3.4" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec834"><i class="fa fa-check"></i><b>8.3.4</b> Parametric Bootstrap</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec84"><i class="fa fa-check"></i><b>8.4</b> Model Selection and Cross-Validation</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec841"><i class="fa fa-check"></i><b>8.4.1</b> k-Fold Cross-Validation</a></li>
<li class="chapter" data-level="8.4.2" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec842"><i class="fa fa-check"></i><b>8.4.2</b> Leave-One-Out Cross-Validation</a></li>
<li class="chapter" data-level="8.4.3" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec843"><i class="fa fa-check"></i><b>8.4.3</b> Cross-Validation and Bootstrap</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="ChapSimulation.html"><a href="ChapSimulation.html#S:Sec85"><i class="fa fa-check"></i><b>8.5</b> Further Resources and Contributors</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ChBayes.html"><a href="ChBayes.html"><i class="fa fa-check"></i><b>9</b> Bayesian Statistics and Modeling</a>
<ul>
<li class="chapter" data-level="9.1" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec91"><i class="fa fa-check"></i><b>9.1</b> A Gentle Introduction to Bayesian Statistics</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec911"><i class="fa fa-check"></i><b>9.1.1</b> Bayesian versus Frequentist Statistics</a></li>
<li class="chapter" data-level="9.1.2" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec912"><i class="fa fa-check"></i><b>9.1.2</b> A Brief History Lesson</a></li>
<li class="chapter" data-level="9.1.3" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec913"><i class="fa fa-check"></i><b>9.1.3</b> Bayes Rule</a></li>
<li class="chapter" data-level="9.1.4" data-path="ChBayes.html"><a href="ChBayes.html#an-introductory-example-of-bayes-rule"><i class="fa fa-check"></i><b>9.1.4</b> An Introductory Example of Bayes Rule</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec92"><i class="fa fa-check"></i><b>9.2</b> Building Blocks of Bayesian Statistics</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec921"><i class="fa fa-check"></i><b>9.2.1</b> Posterior Distribution</a></li>
<li class="chapter" data-level="9.2.2" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec922"><i class="fa fa-check"></i><b>9.2.2</b> Likelihood Function</a></li>
<li class="chapter" data-level="9.2.3" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec923"><i class="fa fa-check"></i><b>9.2.3</b> Prior Distribution</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec93"><i class="fa fa-check"></i><b>9.3</b> Conjugate Families</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec931"><i class="fa fa-check"></i><b>9.3.1</b> The BetaBinomial Conjugate Family</a></li>
<li class="chapter" data-level="9.3.2" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec932"><i class="fa fa-check"></i><b>9.3.2</b> The GammaPoisson Conjugate Family</a></li>
<li class="chapter" data-level="9.3.3" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec933"><i class="fa fa-check"></i><b>9.3.3</b> The NormalNormal Conjugate Family</a></li>
<li class="chapter" data-level="9.3.4" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec934"><i class="fa fa-check"></i><b>9.3.4</b> Criticism of Conjugate Family Models</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec94"><i class="fa fa-check"></i><b>9.4</b> Posterior Simulation</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec941"><i class="fa fa-check"></i><b>9.4.1</b> Introduction to Markov Chain Monte Carlo Methods</a></li>
<li class="chapter" data-level="9.4.2" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec942"><i class="fa fa-check"></i><b>9.4.2</b> The Gibbs Sampler</a></li>
<li class="chapter" data-level="9.4.3" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec943"><i class="fa fa-check"></i><b>9.4.3</b> The MetropolisHastings Algorithm</a></li>
<li class="chapter" data-level="9.4.4" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec944"><i class="fa fa-check"></i><b>9.4.4</b> Markov Chain Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec95"><i class="fa fa-check"></i><b>9.5</b> Bayesian Statistics in Practice</a></li>
<li class="chapter" data-level="9.6" data-path="ChBayes.html"><a href="ChBayes.html#S:Sec96"><i class="fa fa-check"></i><b>9.6</b> Further Resources and Contributors</a>
<ul>
<li class="chapter" data-level="" data-path="ChBayes.html"><a href="ChBayes.html#contributors-8"><i class="fa fa-check"></i>Contributors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html"><i class="fa fa-check"></i><b>10</b> Premium Foundations</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec101"><i class="fa fa-check"></i><b>10.1</b> Introduction to Ratemaking</a></li>
<li class="chapter" data-level="10.2" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec102"><i class="fa fa-check"></i><b>10.2</b> Data Sources</a></li>
<li class="chapter" data-level="10.3" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec103"><i class="fa fa-check"></i><b>10.3</b> Claims</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1031"><i class="fa fa-check"></i><b>10.3.1</b> Estimated Ultimate Claims</a></li>
<li class="chapter" data-level="10.3.2" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1032"><i class="fa fa-check"></i><b>10.3.2</b> Adjustments to Claims and Allocated Claims Adjustment Expenses</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec104"><i class="fa fa-check"></i><b>10.4</b> Exposures</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1041"><i class="fa fa-check"></i><b>10.4.1</b> Criteria for Choosing an Exposure</a></li>
<li class="chapter" data-level="10.4.2" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1042"><i class="fa fa-check"></i><b>10.4.2</b> Written and Earned Exposures</a></li>
<li class="chapter" data-level="10.4.3" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1043"><i class="fa fa-check"></i><b>10.4.3</b> Adjustments to Exposures</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec105"><i class="fa fa-check"></i><b>10.5</b> Pure Premiums</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1051"><i class="fa fa-check"></i><b>10.5.1</b> Experience Period</a></li>
<li class="chapter" data-level="10.5.2" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1052"><i class="fa fa-check"></i><b>10.5.2</b> Expected Pure Premium</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec106"><i class="fa fa-check"></i><b>10.6</b> Non-Claim Expenses</a></li>
<li class="chapter" data-level="10.7" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec107"><i class="fa fa-check"></i><b>10.7</b> Investment Income</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1071"><i class="fa fa-check"></i><b>10.7.1</b> Investment Income on Policyholder Cash Flows</a></li>
<li class="chapter" data-level="10.7.2" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1072"><i class="fa fa-check"></i><b>10.7.2</b> Investment Income on Surplus</a></li>
<li class="chapter" data-level="10.7.3" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1073"><i class="fa fa-check"></i><b>10.7.3</b> The Underwriting Profit Provisions</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec108"><i class="fa fa-check"></i><b>10.8</b> The Premium Equation</a></li>
<li class="chapter" data-level="10.9" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec109"><i class="fa fa-check"></i><b>10.9</b> Pricing Principles</a>
<ul>
<li class="chapter" data-level="10.9.1" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1091"><i class="fa fa-check"></i><b>10.9.1</b> Premium Principles</a></li>
<li class="chapter" data-level="10.9.2" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1092"><i class="fa fa-check"></i><b>10.9.2</b> Properties of Premium Principles</a></li>
</ul></li>
<li class="chapter" data-level="10.10" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1010"><i class="fa fa-check"></i><b>10.10</b> Reviewing Rate Adequacy</a>
<ul>
<li class="chapter" data-level="10.10.1" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec10101"><i class="fa fa-check"></i><b>10.10.1</b> The Loss Ratio Method</a></li>
<li class="chapter" data-level="10.10.2" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec10102"><i class="fa fa-check"></i><b>10.10.2</b> Target Loss Ratio</a></li>
<li class="chapter" data-level="10.10.3" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec10103"><i class="fa fa-check"></i><b>10.10.3</b> Experience Period Loss Ratios</a></li>
<li class="chapter" data-level="10.10.4" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec10104"><i class="fa fa-check"></i><b>10.10.4</b> Adjustments to Loss</a></li>
<li class="chapter" data-level="10.10.5" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec10105"><i class="fa fa-check"></i><b>10.10.5</b> Premium On-Level Adjustment</a></li>
<li class="chapter" data-level="10.10.6" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec10106"><i class="fa fa-check"></i><b>10.10.6</b> Premium Trend</a></li>
<li class="chapter" data-level="10.10.7" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec10107"><i class="fa fa-check"></i><b>10.10.7</b> Credibility</a></li>
</ul></li>
<li class="chapter" data-level="10.11" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#S:Sec1011"><i class="fa fa-check"></i><b>10.11</b> Further Resources and Contributors</a>
<ul>
<li class="chapter" data-level="" data-path="ChapPremiumFoundations.html"><a href="ChapPremiumFoundations.html#ts-10.a.-rate-regulation"><i class="fa fa-check"></i>TS 10.A. Rate Regulation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html"><i class="fa fa-check"></i><b>11</b> Risk Classification</a>
<ul>
<li class="chapter" data-level="11.1" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec111"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec112"><i class="fa fa-check"></i><b>11.2</b> Poisson Regression Model</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1121"><i class="fa fa-check"></i><b>11.2.1</b> Need for Poisson Regression</a></li>
<li class="chapter" data-level="11.2.2" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1122"><i class="fa fa-check"></i><b>11.2.2</b> Poisson Regression</a></li>
<li class="chapter" data-level="11.2.3" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1123"><i class="fa fa-check"></i><b>11.2.3</b> Incorporating Exposure</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec113"><i class="fa fa-check"></i><b>11.3</b> Categorical Variables and Multiplicative Tariff</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1131"><i class="fa fa-check"></i><b>11.3.1</b> Rating Factors and Tariff</a></li>
<li class="chapter" data-level="11.3.2" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1132"><i class="fa fa-check"></i><b>11.3.2</b> Multiplicative Tariff Model</a></li>
<li class="chapter" data-level="11.3.3" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1133"><i class="fa fa-check"></i><b>11.3.3</b> Poisson Regression for Multiplicative Tariff</a></li>
<li class="chapter" data-level="11.3.4" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1134"><i class="fa fa-check"></i><b>11.3.4</b> Numerical Examples</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec114"><i class="fa fa-check"></i><b>11.4</b> Risk Classification vs Discrimination</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1141"><i class="fa fa-check"></i><b>11.4.1</b> Economic Commodity versus Social Good</a></li>
<li class="chapter" data-level="11.4.2" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1142"><i class="fa fa-check"></i><b>11.4.2</b> Information Asymmetry</a></li>
<li class="chapter" data-level="11.4.3" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1143"><i class="fa fa-check"></i><b>11.4.3</b> Sensitive Variables and Regulation</a></li>
<li class="chapter" data-level="11.4.4" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec1144"><i class="fa fa-check"></i><b>11.4.4</b> Big Data Models and Proxy Discrimination</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec115"><i class="fa fa-check"></i><b>11.5</b> Exercises</a></li>
<li class="chapter" data-level="11.6" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#S:Sec116"><i class="fa fa-check"></i><b>11.6</b> Further Resources and Contributors</a>
<ul>
<li class="chapter" data-level="" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#ts-11.a.-estimating-poisson-regression-models"><i class="fa fa-check"></i>TS 11.A. Estimating Poisson Regression Models</a></li>
<li class="chapter" data-level="" data-path="ChapRiskClass.html"><a href="ChapRiskClass.html#ts-11.b.-selecting-rating-factors"><i class="fa fa-check"></i>TS 11.B. Selecting Rating Factors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="ChapCredibility.html"><a href="ChapCredibility.html"><i class="fa fa-check"></i><b>12</b> Experience Rating Using Credibility Theory</a>
<ul>
<li class="chapter" data-level="12.1" data-path="ChapCredibility.html"><a href="ChapCredibility.html#introduction-to-applications-of-credibility-theory"><i class="fa fa-check"></i><b>12.1</b> Introduction to Applications of Credibility Theory</a></li>
<li class="chapter" data-level="12.2" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec122"><i class="fa fa-check"></i><b>12.2</b> Bhlmann Credibility</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec1221"><i class="fa fa-check"></i><b>12.2.1</b> Credibility-Weighted Estimate for the Expected Loss</a></li>
<li class="chapter" data-level="12.2.2" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec1222"><i class="fa fa-check"></i><b>12.2.2</b> Credibility <em>Z</em>, <em>EPV</em>, and <em>VHM</em></a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec123"><i class="fa fa-check"></i><b>12.3</b> Bayesian Inference and Bhlmann Credibility</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec1231"><i class="fa fa-check"></i><b>12.3.1</b> Beta-Binomial Model</a></li>
<li class="chapter" data-level="12.3.2" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec1232"><i class="fa fa-check"></i><b>12.3.2</b> Gamma-Poisson Model</a></li>
<li class="chapter" data-level="12.3.3" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec1233"><i class="fa fa-check"></i><b>12.3.3</b> Exact Credibility</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec124"><i class="fa fa-check"></i><b>12.4</b> Bhlmann-Straub Credibility</a></li>
<li class="chapter" data-level="12.5" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec125"><i class="fa fa-check"></i><b>12.5</b> Estimating Credibility Parameters</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="ChapCredibility.html"><a href="ChapCredibility.html#nonparametric-estimation-for-bhlmann-and-bhlmann-straub-models"><i class="fa fa-check"></i><b>12.5.1</b> Nonparametric Estimation for Bhlmann and Bhlmann-Straub Models</a></li>
<li class="chapter" data-level="12.5.2" data-path="ChapCredibility.html"><a href="ChapCredibility.html#semiparametric-estimation-for-bhlmann-and-bhlmann-straub-models"><i class="fa fa-check"></i><b>12.5.2</b> Semiparametric Estimation for Bhlmann and Bhlmann-Straub Models</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec126"><i class="fa fa-check"></i><b>12.6</b> Limited Fluctuation Credibility</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec1261"><i class="fa fa-check"></i><b>12.6.1</b> Full Credibility for Claim Frequency</a></li>
<li class="chapter" data-level="12.6.2" data-path="ChapCredibility.html"><a href="ChapCredibility.html#full-credibility-for-aggregate-losses-and-pure-premium"><i class="fa fa-check"></i><b>12.6.2</b> Full Credibility for Aggregate Losses and Pure Premium</a></li>
<li class="chapter" data-level="12.6.3" data-path="ChapCredibility.html"><a href="ChapCredibility.html#full-credibility-for-severity"><i class="fa fa-check"></i><b>12.6.3</b> Full Credibility for Severity</a></li>
<li class="chapter" data-level="12.6.4" data-path="ChapCredibility.html"><a href="ChapCredibility.html#partial-credibility"><i class="fa fa-check"></i><b>12.6.4</b> Partial Credibility</a></li>
<li class="chapter" data-level="12.6.5" data-path="ChapCredibility.html"><a href="ChapCredibility.html#full-credibility-standard-for-limited-fluctuation-credibility"><i class="fa fa-check"></i><b>12.6.5</b> Full Credibility Standard for Limited Fluctuation Credibility</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec127"><i class="fa fa-check"></i><b>12.7</b> Balancing Credibility Estimators</a></li>
<li class="chapter" data-level="12.8" data-path="ChapCredibility.html"><a href="ChapCredibility.html#S:Sec128"><i class="fa fa-check"></i><b>12.8</b> Further Resources and Contributors</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html"><i class="fa fa-check"></i><b>13</b> Insurance Portfolio Management including Reinsurance</a>
<ul>
<li class="chapter" data-level="13.1" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#introduction-to-insurance-portfolios"><i class="fa fa-check"></i><b>13.1</b> Introduction to Insurance Portfolios</a></li>
<li class="chapter" data-level="13.2" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#S:Sec132"><i class="fa fa-check"></i><b>13.2</b> Tails of Distributions</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#classification-based-on-moments"><i class="fa fa-check"></i><b>13.2.1</b> Classification Based on Moments</a></li>
<li class="chapter" data-level="13.2.2" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#comparison-based-on-limiting-tail-behavior"><i class="fa fa-check"></i><b>13.2.2</b> Comparison Based on Limiting Tail Behavior</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#S:Sec133"><i class="fa fa-check"></i><b>13.3</b> Risk Measures</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#value-at-risk"><i class="fa fa-check"></i><b>13.3.1</b> Value-at-Risk</a></li>
<li class="chapter" data-level="13.3.2" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#expected-shortfall"><i class="fa fa-check"></i><b>13.3.2</b> Expected Shortfall</a></li>
<li class="chapter" data-level="13.3.3" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#S:Sec1333"><i class="fa fa-check"></i><b>13.3.3</b> Coherent Risk Measures</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#S:Sec134"><i class="fa fa-check"></i><b>13.4</b> Reinsurance</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#S:Sec1341"><i class="fa fa-check"></i><b>13.4.1</b> Proportional Reinsurance</a></li>
<li class="chapter" data-level="13.4.2" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#S:Sec1342"><i class="fa fa-check"></i><b>13.4.2</b> Non-Proportional Reinsurance</a></li>
<li class="chapter" data-level="13.4.3" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#S:Sec1343"><i class="fa fa-check"></i><b>13.4.3</b> Additional Reinsurance Treaties</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#exercises-2"><i class="fa fa-check"></i><b>13.5</b> Exercises</a></li>
<li class="chapter" data-level="13.6" data-path="ChapPortMgt.html"><a href="ChapPortMgt.html#S:Sec136"><i class="fa fa-check"></i><b>13.6</b> Further Resources and Contributors</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html"><i class="fa fa-check"></i><b>14</b> Loss Reserving</a>
<ul>
<li class="chapter" data-level="14.1" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec141"><i class="fa fa-check"></i><b>14.1</b> Motivation</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec1412"><i class="fa fa-check"></i><b>14.1.1</b> Closed, IBNR, and RBNS Claims</a></li>
<li class="chapter" data-level="14.1.2" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec1411"><i class="fa fa-check"></i><b>14.1.2</b> Why Reserving?</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec142"><i class="fa fa-check"></i><b>14.2</b> Loss Reserve Data</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec1421"><i class="fa fa-check"></i><b>14.2.1</b> From Micro to Macro</a></li>
<li class="chapter" data-level="14.2.2" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec1422"><i class="fa fa-check"></i><b>14.2.2</b> Run-off Triangles</a></li>
<li class="chapter" data-level="14.2.3" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec1423"><i class="fa fa-check"></i><b>14.2.3</b> Loss Reserve Notation</a></li>
<li class="chapter" data-level="14.2.4" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec1424"><i class="fa fa-check"></i><b>14.2.4</b> R Code to Summarize Loss Reserve Data</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec143"><i class="fa fa-check"></i><b>14.3</b> The Chain-Ladder Method</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec1431"><i class="fa fa-check"></i><b>14.3.1</b> The Deterministic Chain-Ladder</a></li>
<li class="chapter" data-level="14.3.2" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec1432"><i class="fa fa-check"></i><b>14.3.2</b> Macks Distribution-Free Chain-Ladder Model</a></li>
<li class="chapter" data-level="14.3.3" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec1433"><i class="fa fa-check"></i><b>14.3.3</b> R code for Chain-Ladder Predictions</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec144"><i class="fa fa-check"></i><b>14.4</b> GLMs and Bootstrap for Loss Reserves</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#model-specification"><i class="fa fa-check"></i><b>14.4.1</b> Model Specification</a></li>
<li class="chapter" data-level="14.4.2" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#model-estimation-and-prediction"><i class="fa fa-check"></i><b>14.4.2</b> Model Estimation and Prediction</a></li>
<li class="chapter" data-level="14.4.3" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#bootstrap"><i class="fa fa-check"></i><b>14.4.3</b> Bootstrap</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="ChapLossReserves.html"><a href="ChapLossReserves.html#S:Sec145"><i class="fa fa-check"></i><b>14.5</b> Further Resources and Contributors</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html"><i class="fa fa-check"></i><b>15</b> Experience Rating using Bonus-Malus</a>
<ul>
<li class="chapter" data-level="15.1" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#S:Sec151"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#S:Sec152"><i class="fa fa-check"></i><b>15.2</b> <em>BMS</em> in Several Countries</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#bms-in-malaysia"><i class="fa fa-check"></i><b>15.2.1</b> <em>BMS</em> in Malaysia</a></li>
<li class="chapter" data-level="15.2.2" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#bms-in-other-countries"><i class="fa fa-check"></i><b>15.2.2</b> <em>BMS</em> in Other Countries</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#S:Sec153"><i class="fa fa-check"></i><b>15.3</b> <em>BMS</em> and Markov Chain Model</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#transition-probability"><i class="fa fa-check"></i><b>15.3.1</b> Transition Probability</a></li>
<li class="chapter" data-level="15.3.2" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#some-applications"><i class="fa fa-check"></i><b>15.3.2</b> Some Applications</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#S:Sec154"><i class="fa fa-check"></i><b>15.4</b> <em>BMS</em> and Stationary Distribution</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#stationary-distribution"><i class="fa fa-check"></i><b>15.4.1</b> Stationary Distribution</a></li>
<li class="chapter" data-level="15.4.2" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#r-code-for-a-stationary-distribution"><i class="fa fa-check"></i><b>15.4.2</b> <code>R</code> Code for a Stationary Distribution</a></li>
<li class="chapter" data-level="15.4.3" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#premium-evolution"><i class="fa fa-check"></i><b>15.4.3</b> Premium Evolution</a></li>
<li class="chapter" data-level="15.4.4" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#r-code-for-premium-evolution"><i class="fa fa-check"></i><b>15.4.4</b> <code>R</code> Code for Premium Evolution</a></li>
<li class="chapter" data-level="15.4.5" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#convergence-rate"><i class="fa fa-check"></i><b>15.4.5</b> Convergence Rate</a></li>
<li class="chapter" data-level="15.4.6" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#r-code-for-convergence-rate"><i class="fa fa-check"></i><b>15.4.6</b> <code>R</code> Code for Convergence Rate</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#S:Sec155"><i class="fa fa-check"></i><b>15.5</b> <em>BMS</em> and Premium Rating</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#premium-rating"><i class="fa fa-check"></i><b>15.5.1</b> Premium Rating</a></li>
<li class="chapter" data-level="15.5.2" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#a-priori-risk-classification"><i class="fa fa-check"></i><b>15.5.2</b> A Priori Risk Classification</a></li>
<li class="chapter" data-level="15.5.3" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#modelling-of-residual-heterogeneity"><i class="fa fa-check"></i><b>15.5.3</b> Modelling of Residual Heterogeneity</a></li>
<li class="chapter" data-level="15.5.4" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#stationary-distribution-allowing-for-residual-heterogeneity"><i class="fa fa-check"></i><b>15.5.4</b> Stationary Distribution Allowing for Residual Heterogeneity</a></li>
<li class="chapter" data-level="15.5.5" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#determination-of-optimal-relativities"><i class="fa fa-check"></i><b>15.5.5</b> Determination of Optimal Relativities</a></li>
<li class="chapter" data-level="15.5.6" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#numerical-illustrations"><i class="fa fa-check"></i><b>15.5.6</b> Numerical Illustrations</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="ChapBonusMalus.html"><a href="ChapBonusMalus.html#S:Sec156"><i class="fa fa-check"></i><b>15.6</b> Further Resources and Contributors</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html"><i class="fa fa-check"></i><b>16</b> Quantifying Dependence</a>
<ul>
<li class="chapter" data-level="16.1" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec161"><i class="fa fa-check"></i><b>16.1</b> Classic Measures of Scalar Associations</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#association-measures-for-quantitative-variables"><i class="fa fa-check"></i><b>16.1.1</b> Association Measures for Quantitative Variables</a></li>
<li class="chapter" data-level="16.1.2" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec1612"><i class="fa fa-check"></i><b>16.1.2</b> Rank Based Measures</a></li>
<li class="chapter" data-level="16.1.3" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec1613"><i class="fa fa-check"></i><b>16.1.3</b> Tail Dependence Coefficients</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec162"><i class="fa fa-check"></i><b>16.2</b> Introduction to Copulas</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#definition-of-a-copula"><i class="fa fa-check"></i><b>16.2.1</b> Definition of a Copula</a></li>
<li class="chapter" data-level="16.2.2" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#sklars-theorem"><i class="fa fa-check"></i><b>16.2.2</b> Sklars Theorem</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec163"><i class="fa fa-check"></i><b>16.3</b> Application Using Copulas</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#marginal-models"><i class="fa fa-check"></i><b>16.3.1</b> Marginal Models</a></li>
<li class="chapter" data-level="16.3.2" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec1632"><i class="fa fa-check"></i><b>16.3.2</b> Probability Integral Transformation</a></li>
<li class="chapter" data-level="16.3.3" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#joint-modeling-with-copula-function"><i class="fa fa-check"></i><b>16.3.3</b> Joint Modeling with Copula Function</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec164"><i class="fa fa-check"></i><b>16.4</b> Types of Copulas</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#normal-gaussian-copulas"><i class="fa fa-check"></i><b>16.4.1</b> Normal (Gaussian) Copulas</a></li>
<li class="chapter" data-level="16.4.2" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#t--and-elliptical-copulas"><i class="fa fa-check"></i><b>16.4.2</b> <em>t</em>- and Elliptical Copulas</a></li>
<li class="chapter" data-level="16.4.3" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#archimedean-copulas"><i class="fa fa-check"></i><b>16.4.3</b> Archimedean Copulas</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#properties-of-copulas"><i class="fa fa-check"></i><b>16.5</b> Properties of Copulas</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec1651"><i class="fa fa-check"></i><b>16.5.1</b> Bounds on Association</a></li>
<li class="chapter" data-level="16.5.2" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec1652"><i class="fa fa-check"></i><b>16.5.2</b> Measures of Association</a></li>
<li class="chapter" data-level="16.5.3" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#tail-dependency"><i class="fa fa-check"></i><b>16.5.3</b> Tail Dependency</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec166"><i class="fa fa-check"></i><b>16.6</b> Importance of Dependence Modeling</a>
<ul>
<li class="chapter" data-level="16.6.1" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#why-is-dependence-modeling-important"><i class="fa fa-check"></i><b>16.6.1</b> Why is Dependence Modeling Important?</a></li>
<li class="chapter" data-level="16.6.2" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#copula-regression"><i class="fa fa-check"></i><b>16.6.2</b> Copula Regression</a></li>
</ul></li>
<li class="chapter" data-level="16.7" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#S:Sec167"><i class="fa fa-check"></i><b>16.7</b> Further Resources and Contributors</a>
<ul>
<li class="chapter" data-level="" data-path="ChapDependenceModel.html"><a href="ChapDependenceModel.html#ts-16.a.-other-classic-measures-of-scalar-associations"><i class="fa fa-check"></i>TS 16.A. Other Classic Measures of Scalar Associations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="CAppA.html"><a href="CAppA.html"><i class="fa fa-check"></i><b>17</b> Appendix A: Review of Statistical Inference</a>
<ul>
<li class="chapter" data-level="17.1" data-path="CAppA.html"><a href="CAppA.html#S:Sec171"><i class="fa fa-check"></i><b>17.1</b> Basic Concepts</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="CAppA.html"><a href="CAppA.html#S:Sec1711"><i class="fa fa-check"></i><b>17.1.1</b> Random Sampling</a></li>
<li class="chapter" data-level="17.1.2" data-path="CAppA.html"><a href="CAppA.html#S:Sec1712"><i class="fa fa-check"></i><b>17.1.2</b> Sampling Distribution</a></li>
<li class="chapter" data-level="17.1.3" data-path="CAppA.html"><a href="CAppA.html#S:Sec1713"><i class="fa fa-check"></i><b>17.1.3</b> Central Limit Theorem</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="CAppA.html"><a href="CAppA.html#S:Sec172"><i class="fa fa-check"></i><b>17.2</b> Point Estimation and Properties</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="CAppA.html"><a href="CAppA.html#S:Sec1721"><i class="fa fa-check"></i><b>17.2.1</b> Method of Moments Estimation</a></li>
<li class="chapter" data-level="17.2.2" data-path="CAppA.html"><a href="CAppA.html#S:Sec1722"><i class="fa fa-check"></i><b>17.2.2</b> Maximum Likelihood Estimation</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="CAppA.html"><a href="CAppA.html#S:Sec173"><i class="fa fa-check"></i><b>17.3</b> Interval Estimation</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="CAppA.html"><a href="CAppA.html#S:Sec1731"><i class="fa fa-check"></i><b>17.3.1</b> Exact Distribution for Normal Sample Mean</a></li>
<li class="chapter" data-level="17.3.2" data-path="CAppA.html"><a href="CAppA.html#large-sample-properties-of-mle"><i class="fa fa-check"></i><b>17.3.2</b> Large-sample Properties of <em>MLE</em></a></li>
<li class="chapter" data-level="17.3.3" data-path="CAppA.html"><a href="CAppA.html#confidence-interval"><i class="fa fa-check"></i><b>17.3.3</b> Confidence Interval</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="CAppA.html"><a href="CAppA.html#S:Sec174"><i class="fa fa-check"></i><b>17.4</b> Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="CAppA.html"><a href="CAppA.html#S:Sec1741"><i class="fa fa-check"></i><b>17.4.1</b> Basic Concepts</a></li>
<li class="chapter" data-level="17.4.2" data-path="CAppA.html"><a href="CAppA.html#S:Sec1742"><i class="fa fa-check"></i><b>17.4.2</b> Student-<em>t</em> test based on <em>mle</em></a></li>
<li class="chapter" data-level="17.4.3" data-path="CAppA.html"><a href="CAppA.html#S:Sec1743"><i class="fa fa-check"></i><b>17.4.3</b> Likelihood Ratio Test</a></li>
<li class="chapter" data-level="17.4.4" data-path="CAppA.html"><a href="CAppA.html#S:Sec1744"><i class="fa fa-check"></i><b>17.4.4</b> Information Criteria</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="CAppB.html"><a href="CAppB.html"><i class="fa fa-check"></i><b>18</b> Appendix B: Iterated Expectations</a>
<ul>
<li class="chapter" data-level="18.1" data-path="CAppB.html"><a href="CAppB.html#S:Sec181"><i class="fa fa-check"></i><b>18.1</b> Conditional Distribution and Conditional Expectation</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="CAppB.html"><a href="CAppB.html#conditional-distribution"><i class="fa fa-check"></i><b>18.1.1</b> Conditional Distribution</a></li>
<li class="chapter" data-level="18.1.2" data-path="CAppB.html"><a href="CAppB.html#conditional-expectation-and-conditional-variance"><i class="fa fa-check"></i><b>18.1.2</b> Conditional Expectation and Conditional Variance</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="CAppB.html"><a href="CAppB.html#S:Sec182"><i class="fa fa-check"></i><b>18.2</b> Iterated Expectations and Total Variance</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="CAppB.html"><a href="CAppB.html#S:Sec1821"><i class="fa fa-check"></i><b>18.2.1</b> Law of Iterated Expectations</a></li>
<li class="chapter" data-level="18.2.2" data-path="CAppB.html"><a href="CAppB.html#law-of-total-variance"><i class="fa fa-check"></i><b>18.2.2</b> Law of Total Variance</a></li>
<li class="chapter" data-level="18.2.3" data-path="CAppB.html"><a href="CAppB.html#application"><i class="fa fa-check"></i><b>18.2.3</b> Application</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="CAppB.html"><a href="CAppB.html#S:Sec183"><i class="fa fa-check"></i><b>18.3</b> Conjugate Distributions</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="CAppB.html"><a href="CAppB.html#linear-exponential-family"><i class="fa fa-check"></i><b>18.3.1</b> Linear Exponential Family</a></li>
<li class="chapter" data-level="18.3.2" data-path="CAppB.html"><a href="CAppB.html#S:Sec1832"><i class="fa fa-check"></i><b>18.3.2</b> Conjugate Distributions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="CAppC.html"><a href="CAppC.html"><i class="fa fa-check"></i><b>19</b> Appendix C: Maximum Likelihood Theory</a>
<ul>
<li class="chapter" data-level="19.1" data-path="CAppC.html"><a href="CAppC.html#S:Sec191"><i class="fa fa-check"></i><b>19.1</b> Likelihood Function</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="CAppC.html"><a href="CAppC.html#likelihood-and-log-likelihood-functions"><i class="fa fa-check"></i><b>19.1.1</b> Likelihood and Log-likelihood Functions</a></li>
<li class="chapter" data-level="19.1.2" data-path="CAppC.html"><a href="CAppC.html#properties-of-likelihood-functions"><i class="fa fa-check"></i><b>19.1.2</b> Properties of Likelihood Functions</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="CAppC.html"><a href="CAppC.html#S:Sec192"><i class="fa fa-check"></i><b>19.2</b> Maximum Likelihood Estimators</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="CAppC.html"><a href="CAppC.html#definition-and-derivation-of-mle"><i class="fa fa-check"></i><b>19.2.1</b> Definition and Derivation of <em>MLE</em></a></li>
<li class="chapter" data-level="19.2.2" data-path="CAppC.html"><a href="CAppC.html#asymptotic-properties-of-mle"><i class="fa fa-check"></i><b>19.2.2</b> Asymptotic Properties of <em>MLE</em></a></li>
<li class="chapter" data-level="19.2.3" data-path="CAppC.html"><a href="CAppC.html#use-of-maximum-likelihood-estimation"><i class="fa fa-check"></i><b>19.2.3</b> Use of Maximum Likelihood Estimation</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="CAppC.html"><a href="CAppC.html#S:Sec193"><i class="fa fa-check"></i><b>19.3</b> Statistical Inference Based on Maximum Likelihood Estimation</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="CAppC.html"><a href="CAppC.html#hypothesis-testing"><i class="fa fa-check"></i><b>19.3.1</b> Hypothesis Testing</a></li>
<li class="chapter" data-level="19.3.2" data-path="CAppC.html"><a href="CAppC.html#S:Sec1932"><i class="fa fa-check"></i><b>19.3.2</b> <em>MLE</em> and Model Validation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html"><i class="fa fa-check"></i><b>20</b> Appendix D: Summary of Distributions</a>
<ul>
<li class="chapter" data-level="20.1" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#S:DiscreteDistributions"><i class="fa fa-check"></i><b>20.1</b> Discrete Distributions</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#the-ab0-class"><i class="fa fa-check"></i><b>20.1.1</b> The <em>(a,b,0)</em> Class</a></li>
<li class="chapter" data-level="20.1.2" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#the-ab1-class"><i class="fa fa-check"></i><b>20.1.2</b> The <em>(a,b,1)</em> Class</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#S:ContinuousDistributions"><i class="fa fa-check"></i><b>20.2</b> Continuous Distributions</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#one-parameter-distributions"><i class="fa fa-check"></i><b>20.2.1</b> One Parameter Distributions</a></li>
<li class="chapter" data-level="20.2.2" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#two-parameter-distributions"><i class="fa fa-check"></i><b>20.2.2</b> Two Parameter Distributions</a></li>
<li class="chapter" data-level="20.2.3" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#three-parameter-distributions"><i class="fa fa-check"></i><b>20.2.3</b> Three Parameter Distributions</a></li>
<li class="chapter" data-level="20.2.4" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#four-parameter-distribution"><i class="fa fa-check"></i><b>20.2.4</b> Four Parameter Distribution</a></li>
<li class="chapter" data-level="20.2.5" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#other-distributions"><i class="fa fa-check"></i><b>20.2.5</b> Other Distributions</a></li>
<li class="chapter" data-level="20.2.6" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#distributions-with-finite-support"><i class="fa fa-check"></i><b>20.2.6</b> Distributions with Finite Support</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="ChapSummaryDistributions.html"><a href="ChapSummaryDistributions.html#limited-expected-values"><i class="fa fa-check"></i><b>20.3</b> Limited Expected Values</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="ChapNotationConvention.html"><a href="ChapNotationConvention.html"><i class="fa fa-check"></i><b>21</b> Appendix E: Conventions for Notation</a>
<ul>
<li class="chapter" data-level="21.1" data-path="ChapNotationConvention.html"><a href="ChapNotationConvention.html#S:General"><i class="fa fa-check"></i><b>21.1</b> General Conventions</a></li>
<li class="chapter" data-level="21.2" data-path="ChapNotationConvention.html"><a href="ChapNotationConvention.html#S:Abbreviations"><i class="fa fa-check"></i><b>21.2</b> Abbreviations</a></li>
<li class="chapter" data-level="21.3" data-path="ChapNotationConvention.html"><a href="ChapNotationConvention.html#S:StatSymbols"><i class="fa fa-check"></i><b>21.3</b> Common Statistical Symbols and Operators</a></li>
<li class="chapter" data-level="21.4" data-path="ChapNotationConvention.html"><a href="ChapNotationConvention.html#S:Symbols"><i class="fa fa-check"></i><b>21.4</b> Common Mathematical Symbols and Functions</a></li>
<li class="chapter" data-level="21.5" data-path="ChapNotationConvention.html"><a href="ChapNotationConvention.html#further-readings"><i class="fa fa-check"></i><b>21.5</b> Further Readings</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="DataResources.html"><a href="DataResources.html"><i class="fa fa-check"></i><b>22</b> Appendix. Data Resources</a>
<ul>
<li class="chapter" data-level="22.1" data-path="DataResources.html"><a href="DataResources.html#S:WiscPropFundA"><i class="fa fa-check"></i><b>22.1</b> Wisconsin Property Fund</a></li>
<li class="chapter" data-level="22.2" data-path="DataResources.html"><a href="DataResources.html#Sec:DataTravel"><i class="fa fa-check"></i><b>22.2</b> ANU Corporate Travel Data</a></li>
<li class="chapter" data-level="22.3" data-path="DataResources.html"><a href="DataResources.html#Sec:DataGPA"><i class="fa fa-check"></i><b>22.3</b> ANU Group Personal Accident Data</a></li>
<li class="chapter" data-level="22.4" data-path="DataResources.html"><a href="DataResources.html#Sec:DataAuto"><i class="fa fa-check"></i><b>22.4</b> ANU Motor Vehicle Data</a></li>
<li class="chapter" data-level="22.5" data-path="DataResources.html"><a href="DataResources.html#spanish-personal-insurance-data"><i class="fa fa-check"></i><b>22.5</b> Spanish Personal Insurance Data</a></li>
<li class="chapter" data-level="22.6" data-path="DataResources.html"><a href="DataResources.html#S:CASDatasets"><i class="fa fa-check"></i><b>22.6</b> R Package CASdatasets</a></li>
<li class="chapter" data-level="22.7" data-path="DataResources.html"><a href="DataResources.html#other-data-sources"><i class="fa fa-check"></i><b>22.7</b> Other Data Sources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="divider"></li>
<li><a href="https://github.com/OpenActTexts/Loss-Data-Analytics" target="blank">Loss Data Analytics on GitHub</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Loss Data Analytics <br> Second Edition</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ChapModelSelection" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Model Selection<a href="ChapModelSelection.html#ChapModelSelection" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>Chapter Preview</em>. Model selection is a fundamental aspect of statistical modeling. In this chapter, the process of model selection is summarized, including tools for model comparisons and diagnostics. In addition to nonparametric tools for model selection based on marginal distributions of outcomes ignoring explanatory variables, this chapter underscores the idea that model selection is an iterative process in which models are cyclically (re)formulated and tested for appropriateness before using them for inference. After an overview, we describe the <a href="#" class="tooltip" style="color:green"><em>model selection</em><span style="font-size:8pt">The process of selecting a statistical model from a set of candidate models using data.</span></a> process based on:</p>
<ul>
<li>an <a href="#" class="tooltip" style="color:green"><em>in-sample</em><span style="font-size:8pt">A dataset used for analysis and model development. also known as a training dataset.</span></a> or training dataset,</li>
<li>an <a href="#" class="tooltip" style="color:green"><em>out-of-sample</em><span style="font-size:8pt">A dataset used for model validation. also known as a test dataset.</span></a> or test dataset, and</li>
<li>a method that combines these approaches known as
<a href="#" class="tooltip" style="color:green"><em>cross-validation</em><span style="font-size:8pt">A model validation procedure in which the data sample is partitioned into subsamples, where splits are formed by separately taking each subsample as the out-of-sample dataset.</span></a>.</li>
</ul>
<p>Although our focus is predominantly on data from continuous distributions, the same process can be used for discrete versions or data that come from a hybrid combination of discrete and continuous distributions.</p>
<hr />
<p>In this chapter, you learn how to:</p>
<ul>
<li>Determine measures that summarize deviations of a parametric from a nonparametric fit</li>
<li>Describe the iterative model selection specification process</li>
<li>Outline steps needed to select a parametric model</li>
<li>Describe pitfalls of model selection based purely on in-sample data when compared to the advantages of out-of-sample model validation</li>
</ul>
<hr />
<div id="S:Sec61" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Tools for Model Selection and Diagnostics<a href="ChapModelSelection.html#S:Sec61" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Section <a href="ChapSeverity.html#S:Sec411">4.1.1</a> introduced nonparametric estimators in
which there was no parametric form assumed about the underlying
distributions. However, in many actuarial applications, analysts seek to
employ a parametric fit of a distribution for ease of explanation and
the ability to readily extend it to more complex situations such as
including explanatory variables in a regression setting. When fitting a
parametric distribution, one analyst might try to use a gamma
distribution to represent a set of loss data. However, another analyst
may prefer to use a Pareto distribution. How does one determine which
model to select?</p>
<p>Nonparametric tools can be used to corroborate the selection of
parametric models. Essentially, the approach is to compute selected
summary measures under a fitted parametric model and to compare it to
the corresponding quantity under the nonparametric model. As the
nonparametric model does not assume a specific distribution and is
merely a function of the data, it is used as a benchmark to assess how
well the parametric distribution/model represents the data. Also, as the
sample size increases, the empirical distribution converges almost
surely to the underlying population distribution (by the strong law of
large numbers). Thus the empirical distribution is a good proxy for the
population. The comparison of parametric to nonparametric estimators may
alert the analyst to deficiencies in the parametric model and sometimes
point ways to improving the parametric specification. Procedures geared
towards assessing the validity of a model are known as
<a href="#" class="tooltip" style="color:green"><em>model diagnostics</em><span style="font-size:8pt">Procedures to assess the validity of a model</span></a>.</p>
<div id="S:Sec611" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Graphical Comparison of Distributions<a href="ChapModelSelection.html#S:Sec611" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have already seen the technique of overlaying graphs for comparison purposes. To reinforce the application of this technique, Figure <a href="ChapModelSelection.html#fig:Fig61">6.1</a> compares the empirical distribution to two parametric fitted distributions for log claims from the Property Fund data introduced in Section <a href="ChapIntro.html#S:LGPIF">1.3</a>. The left panel shows the distribution functions of claims distributions. The dots forming an S-shaped curve represent the empirical distribution function at each observation. The thick blue curve gives corresponding values for the fitted gamma distribution and the light purple is for the fitted Pareto distribution. Because the Pareto is much closer to the empirical distribution function than the gamma, this provides evidence that the Pareto is the better model for this dataset. The right panel gives similar information for the density function and provides a consistent message. Based (only) on
these figures, the Pareto distribution is the clear choice for the
analyst.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:Fig61"></span>
<img src="LDAEd2_files/figure-html/Fig61-1.png" alt="Nonparametric Versus Fitted Parametric Distribution and Density Functions. The left-hand panel compares distribution functions, with the dots corresponding to the empirical distribution, the thick blue curve corresponding to the fitted gamma and the light purple curve corresponding to the fitted Pareto. The right hand panel compares these three distributions summarized using probability density functions." width="100%" />
<p class="caption">
Figure 6.1: <strong>Nonparametric Versus Fitted Parametric Distribution and Density Functions.</strong> The left-hand panel compares distribution functions, with the dots corresponding to the empirical distribution, the thick blue curve corresponding to the fitted gamma and the light purple curve corresponding to the fitted Pareto. The right hand panel compares these three distributions summarized using probability density functions.
</p>
</div>
<p>For another way to compare the appropriateness of two fitted models, consider the <a href="#" class="tooltip" style="color:green"><em>probability-probability (pp) plot</em><span style="font-size:8pt">A plot that compares two models through their cumulative probabilities.</span></a>. A <span class="math inline">\(pp\)</span> plot compares cumulative probabilities under two models. For our purposes, these two models are the nonparametric empirical distribution function
and the parametric fitted model. Figure <a href="ChapModelSelection.html#fig:Fig62">6.2</a> shows <span class="math inline">\(pp\)</span> plots for the Property Fund data. The fitted gamma is on the left and the fitted Pareto is on the right, compared to the same empirical distribution function of the data. The straight line represents equality between the two distributions being compared, so points close to the line are desirable. As seen in earlier demonstrations, the Pareto is much closer to the empirical distribution than the gamma, providing additional evidence that the Pareto is the better model.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:Fig62"></span>
<img src="LDAEd2_files/figure-html/Fig62-1.png" alt="Probability-Probability (\(pp\)) Plots. The horizontal axis gives the empirical distribution function at each observation. In the left-hand panel, the corresponding distribution function for the gamma is shown in the vertical axis. The right-hand panel shows the fitted Pareto distribution. Lines of \(y=x\) are superimposed." width="100%" />
<p class="caption">
Figure 6.2: <strong>Probability-Probability (<span class="math inline">\(pp\)</span>) Plots.</strong> The horizontal axis gives the empirical distribution function at each observation. In the left-hand panel, the corresponding distribution function for the gamma is shown in the vertical axis. The right-hand panel shows the fitted Pareto distribution. Lines of <span class="math inline">\(y=x\)</span> are superimposed.
</p>
</div>
<p>A <span class="math inline">\(pp\)</span> plot is useful in part because no artificial scaling is required,
such as with the overlaying of densities in Figure
<a href="ChapModelSelection.html#fig:Fig61">6.1</a>, in which we switched to the log scale to
better visualize the data. Note further that <span class="math inline">\(pp\)</span> plots are available in multivariate
settings where more than one outcome variable is available. However, a
limitation of the <span class="math inline">\(pp\)</span> plot is that, because it plots <em>cumulative</em>
distribution functions, it can sometimes be difficult to detect <em>where</em>
a fitted parametric distribution is deficient. As an alternative, it is
common to use a <a href="#" class="tooltip" style="color:green"><em>quantile-quantile (qq) plot</em><span style="font-size:8pt">A plot that compares two models through their quantiles.</span></a>, as
demonstrated in Figure <a href="ChapModelSelection.html#fig:Fig63">6.3</a>.</p>
<p>A <span class="math inline">\(qq\)</span> plot compares two fitted models through their quantiles. As
with <span class="math inline">\(pp\)</span> plots, we compare the nonparametric to a parametric fitted
model. Quantiles may be evaluated at each point of the dataset, or on a
grid (e.g., at <span class="math inline">\(0, 0.001, 0.002, \ldots, 0.999, 1.000\)</span>), depending on
the application. In Figure <a href="ChapModelSelection.html#fig:Fig63">6.3</a>, for each point on the
aforementioned grid, the horizontal axis displays the empirical quantile
and the vertical axis displays the corresponding fitted parametric
quantile (gamma for the upper two panels, Pareto for the lower two).
Quantiles are plotted on the original scale in the left panels and on
the log scale in the right panels to allow us to see where a fitted
distribution is deficient. The straight line represents equality between
the empirical distribution and fitted distribution. From these plots, we
again see that the Pareto is an overall better fit than the gamma.
Furthermore, the lower-right panel suggests that the Pareto distribution
does a good job with large claims, but provides a poorer fit for small
claims.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:Fig63"></span>
<img src="LDAEd2_files/figure-html/Fig63-1.png" alt="Quantile-Quantile (\(qq\)) Plots. The horizontal axis gives the empirical quantiles at each observation. The right-hand panels they are graphed on a logarithmic basis. The vertical axis gives the quantiles from the fitted distributions; gamma quantiles are in the upper panels, Pareto quantiles are in the lower panels." width="80%" />
<p class="caption">
Figure 6.3: <strong>Quantile-Quantile (<span class="math inline">\(qq\)</span>) Plots.</strong> The horizontal axis gives the empirical quantiles at each observation. The right-hand panels they are graphed on a logarithmic basis. The vertical axis gives the quantiles from the fitted distributions; gamma quantiles are in the upper panels, Pareto quantiles are in the lower panels.
</p>
</div>
<p><strong>Example 6.1.1. Actuarial Exam Question.</strong> Figure <a href="ChapModelSelection.html#fig:Fig64">6.4</a> shows a <span class="math inline">\(pp\)</span> plot of a fitted distribution compared to a sample.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:Fig64"></span>
<img src="LDAEd2_files/figure-html/Fig64-1.png" alt="Example 6.1.1 Plot" width="40%" />
<p class="caption">
Figure 6.4: <strong>Example 6.1.1 Plot</strong>
</p>
</div>
<p>Comment on the two distributions with respect to left tail, right tail, and median probabilities.</p>
<h5 style="text-align: center;">
<a id="displayExample.6.1.1" href="javascript:toggleEX('toggleExample.6.1.1','displayExample.6.1.1');"><i><strong>Show Example Solution</strong></i></a>
</h5>
<div id="toggleExample.6.1.1" style="display: none">
<p><em>Example Solution.</em> The tail of the fitted distribution is too thick on the
left, too thin on the right, and the fitted distribution has less
probability around the median than the sample. To see this, recall that
the <span class="math inline">\(pp\)</span> plot graphs the cumulative distribution of two distributions on
its axes (empirical on the x-axis and fitted on the y-axis in this
case). For small values of <span class="math inline">\(x\)</span>, the fitted model assigns greater
probability to being below that value than occurred in the sample (i.e.
<span class="math inline">\(F(x) &gt; F_n(x)\)</span>). This indicates that the model has a heavier left tail
than the data. For large values of <span class="math inline">\(x\)</span>, the model again assigns greater
probability to being below that value and thus less probability to being
above that value (i.e.<span class="math inline">\(S(x) &lt; S_n(x)\)</span>). This indicates that the model
has a lighter right tail than the data. In addition, as we go from 0.4
to 0.6 on the horizontal axis (thus looking at the middle 20% of the
data), the <span class="math inline">\(pp\)</span> plot increases from about 0.3 to 0.4. This indicates
that the model puts only about 10% of the probability in this range.</p>
</div>
<hr />
</div>
<div id="S:Sec612" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Statistical Comparison of Distributions<a href="ChapModelSelection.html#S:Sec612" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When selecting a model, it is helpful to make the graphical displays presented. However, for reporting results, it can be effective to supplement the graphical displays with selected statistics that
summarize model goodness of fit. <a href="ChapModelSelection.html#tab:6.1">Table 6.1</a> provides three commonly used <a href="#" class="tooltip" style="color:green"><em>goodness of fit statistics</em><span style="font-size:8pt">A measure used to assess how well a statistical model fits the data, usually by summarizing the discrepancy between the observations and the expected values under the model.</span></a>. In this table, <span class="math inline">\(F_n\)</span> is the empirical distribution, <span class="math inline">\(F\)</span> is the fitted or hypothesized
distribution, and <span class="math inline">\(F_i^* = F(x_i)\)</span>.</p>
<div style="page-break-after: always;"></div>
<p><a id=tab:6.1></a></p>
<p><span id="tab:6.1">Table 6.1</span>. <strong>Three Goodness of Fit Statistics</strong></p>
<p><span class="math display">\[
{\small
\begin{matrix}
\begin{array}{l|cc}
\hline
\text{Statistic} &amp; \text{Definition} &amp; \text{Computational Expression} \\
\hline
\text{Kolmogorov-} &amp; \max_x |F_n(x) - F(x)| &amp; \max(D^+, D^-) \text{ where } \\
~~~\text{Smirnov} &amp;&amp; D^+ = \max_{i=1, \ldots, n} \left|\frac{i}{n} - F_i^*\right| \\
&amp;&amp; D^- = \max_{i=1, \ldots, n} \left| F_i^* - \frac{i-1}{n} \right| \\
\text{Cramer-von Mises} &amp; n \int (F_n(x) - F(x))^2 f(x) dx &amp; \frac{1}{12n} + \sum_{i=1}^n \left(F_i^* - (2i-1)/n\right)^2 \\
\text{Anderson-Darling} &amp; n \int \frac{(F_n(x) - F(x))^2}{F(x)(1-F(x))} f(x) dx &amp; -n-\frac{1}{n} \sum_{i=1}^n (2i-1) \log\left(F_i^*(1-F_{n+1-i})\right)^2 \\
\hline
\end{array} \\
\end{matrix}
}
\]</span></p>
<p>The <em>Kolmogorov-Smirnov statistic</em> is the maximum absolute difference
between the fitted distribution function and the empirical distribution
function. Instead of comparing differences between single points, the
<em>Cramer-von Mises statistic</em> integrates the difference between the
empirical and fitted distribution functions over the entire range of
values. The <em>Anderson-Darling statistic</em> also integrates this difference
over the range of values, although weighted by the inverse of the
variance. It therefore places greater emphasis on the tails of the
distribution (i.e when <span class="math inline">\(F(x)\)</span> or <span class="math inline">\(1-F(x)=S(x)\)</span> is small).</p>
<hr />
<p><strong>Example 6.1.2. Actuarial Exam Question (modified).</strong> A sample of claim
payments is:
<span class="math display">\[
\begin{array}{ccccc}
29 &amp; 64 &amp; 90 &amp; 135 &amp; 182  \\
\end{array}
\]</span>
Compare the empirical claims distribution to an exponential distribution
with mean <span class="math inline">\(100\)</span> by calculating the value of the Kolmogorov-Smirnov test
statistic.</p>
<h5 style="text-align: center;">
<a id="displayExample.6.1.2" href="javascript:toggleEX('toggleExample.6.1.2','displayExample.6.1.2');"><i><strong>Show Example Solution</strong></i></a>
</h5>
<div id="toggleExample.6.1.2" style="display: none">
<p>r SolnBegin()` For an exponential distribution with mean <span class="math inline">\(100\)</span>, the
cumulative distribution function is <span class="math inline">\(F(x)=1-e^{-x/100}\)</span>. Thus,
<span class="math display">\[
\small{
\begin{array}{ccccc}
\hline
x &amp; F(x) &amp; F_n(x) &amp; F_n(x-) &amp; \max(|F(x)-F_n(x)|,|F(x)-F_n(x-)|) \\
\hline
29  &amp; 0.2517 &amp; 0.2 &amp; 0   &amp; \max(0.0517, 0.2517) = 0.2517 \\
64  &amp; 0.4727 &amp; 0.4 &amp; 0.2 &amp; \max(0.0727, 0.2727) = 0.2727 \\
90  &amp; 0.5934 &amp; 0.6 &amp; 0.4 &amp; \max(0.0066, 0.1934) = 0.1934 \\
135 &amp; 0.7408 &amp; 0.8 &amp; 0.6 &amp; \max(0.0592, 0.1408) = 0.1408 \\
182 &amp; 0.8380 &amp; 1   &amp; 0.8 &amp; \max(0.1620, 0.0380) = 0.1620 \\
\hline
\end{array}
}
\]</span>
The Kolmogorov-Smirnov test statistic is therefore
<span class="math display">\[
KS = \max(0.2517, 0.2727, 0.1934, 0.1408, 0.1620) = 0.2727 .
\]</span></p>
<p>r SolnEnd()`</p>
<hr />
</div>
<div id="pearsons-chi-square-test" class="section level4 unnumbered hasAnchor">
<h4>Pearsons chi-square test<a href="ChapModelSelection.html#pearsons-chi-square-test" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this section we introduce another goodness of fit test - Pearsons chi-square test - which can be used for testing whether a discrete distribution provides a good fit to discrete data. For more details on the <a href="#" class="tooltip" style="color:green"><em>Pearsons chi-square test</em><span style="font-size:8pt">A statistical test applied to sets of categorical data to evaluate how likely it is that any observed difference between the sets arose by chance</span></a>, at an introductory mathematical statistics level, we refer the reader to Section 9.1 of <span class="citation">Hogg, Tanis, and Zimmerman (<a href="bibliography.html#ref-zimmerman2015">2015</a>)</span>.</p>
<p>To illustrate application of the Pearsons chi-square test, we use the example introduced in Section <a href="ChapFrequency-Modeling.html#S:Sec37">3.7</a>: In <span class="math inline">\(1993\)</span>, a portfolio of <span class="math inline">\(n=7,483\)</span> automobile insurance policies from a major Singaporean insurance company had the distribution of auto accidents per policyholder as given in <a href="ChapModelSelection.html#tab:6.2">Table 6.2</a>.</p>
<p><a id=tab:6.2></a></p>
<p><span id="tab:6.2">Table 6.2</span>. <strong>Singaporean Automobile Accident Data</strong></p>
<p><span class="math display">\[
\small{
\begin{array}{l|c|c|c|c|c|c}
\hline
\text{Count }(k) &amp; 0 &amp; 1 &amp; 2 &amp; 3 &amp; 4 &amp; \text{Total}\\
\hline
\text{No. of Policies with }k\text{ accidents }(m_k) &amp; 6,996 &amp; 455 &amp; 28 &amp; 4 &amp; 0 &amp; 7,483\\
\hline
\end{array}
}
\]</span></p>
<p>If we a fit a Poisson distribution, then the <em>mle</em> for <span class="math inline">\(\lambda\)</span>, the Poisson mean, is the sample mean which is given by
<span class="math display">\[
\overline{N} = \frac{0\cdot 6996 + 1 \cdot 455 + 2 \cdot 28 + 3 \cdot 4 + 4 \cdot 0}{7483} = 0.06989.
\]</span>
Now if we use Poisson (<span class="math inline">\(\hat{\lambda}_{MLE}\)</span>) as the fitted distribution, then a tabular comparison of the fitted counts and observed counts is given by <a href="ChapModelSelection.html#tab:6.3">Table 6.3</a>, where <span class="math inline">\(\hat{p}_k\)</span> represents the estimated probabilities under the fitted Poisson distribution.</p>
<p><a id=tab:6.3></a></p>
<p><span id="tab:6.3">Table 6.3</span>. <strong>Comparison of Observed to Fitted Counts: Singaporean Auto Data</strong></p>
<p><span class="math display">\[
\small{
\begin{array}{c|r|r}
\hline
\text{Count}  &amp; \text{Observed}  &amp; \text{Fitted Counts}\\
(k) &amp; (m_k) &amp; \text{Using Poisson }(n\hat{p}_k)\\
\hline
0 &amp; 6,996 &amp; 6,977.86 \\
1 &amp; 455 &amp; 487.70 \\
2 &amp; 28 &amp; 17.04 \\
3 &amp; 4 &amp; 0.40 \\
\geq 4 &amp; 0 &amp; 0.01\\
\hline
\text{Total} &amp; 7,483 &amp; 7,483.00\\
\hline
\end{array}
}
\]</span></p>
<p>While the fit seems reasonable, the Pearsons chi-square statistic is a goodness of fit measure that can be used to test the hypothesis that the underlying distribution is Poisson. To explain this statistic let us suppose that a dataset of size <span class="math inline">\(n\)</span> is grouped into <span class="math inline">\(k\)</span> cells with <span class="math inline">\(m_k/n\)</span> and <span class="math inline">\(\hat{p}_k\)</span>, for <span class="math inline">\(k=1\ldots,K\)</span> being the observed and estimated probabilities of an observation belonging to the <span class="math inline">\(k\)</span>-th cell, respectively. The Pearsons chi-square test statistic is then given by
<span class="math display">\[
\sum_{k=1}^K\frac{\left( m_k-n\widehat{p}_k \right) ^{2}}{n\widehat{p}_k}.
\]</span>
The motivation for the above statistic derives from the fact that
<span class="math display">\[
\sum_{k=1}^K\frac{\left( m_k-n{p}_k \right) ^{2}}{n{p}_k}
\]</span>
has a limiting <a href="#" class="tooltip" style="color:green"><em>chi-square distribution</em><span style="font-size:8pt">The chi-squared distribution with k degrees of freedom is the distribution of a sum of the squares of k independent standard normal random variables</span></a> with <span class="math inline">\(K-1\)</span> degrees of freedom if <span class="math inline">\(p_k\)</span>, <span class="math inline">\(k=1,\ldots,K\)</span> are the true cell probabilities. Now suppose that only the summarized data represented by <span class="math inline">\(m_k\)</span>, <span class="math inline">\(k=1,\ldots,K\)</span> is available. Further, if <span class="math inline">\(p_k\)</span>s are functions of <span class="math inline">\(s\)</span> parameters, replacing <span class="math inline">\(p_k\)</span>s by any <em>efficiently</em> estimated probabilities <span class="math inline">\(\widehat{p}_k\)</span>s results in the statistic continuing to have a limiting chi-square distribution but with degrees of freedom given by <span class="math inline">\(K-1-s\)</span>. Such efficient estimates can be derived for example by using the <em>mle</em> method (with a <a href="#" class="tooltip" style="color:green"><em>multinomial likelihood</em><span style="font-size:8pt">The multinomial distribution models the probability of counts for rolling a k-sided die n times</span></a>) or by estimating the <span class="math inline">\(s\)</span> parameters which minimizes the Pearsons chi-square statistic above. For example, the <code>R</code> code below does calculate an estimate for <span class="math inline">\(\lambda\)</span> doing the latter and results in the estimate <span class="math inline">\(0.06623153\)</span>, close but different from the <em>mle</em> of <span class="math inline">\(\lambda\)</span> using the full data:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb61-1"><a href="ChapModelSelection.html#cb61-1" tabindex="-1"></a>m  &lt;- c(6996,455,28,4,0);</span>
<span id="cb61-2"><a href="ChapModelSelection.html#cb61-2" tabindex="-1"></a>op &lt;- m/sum(m);</span>
<span id="cb61-3"><a href="ChapModelSelection.html#cb61-3" tabindex="-1"></a>g  &lt;- function(lam){ sum( (op-c(dpois(0:3,lam),1-ppois(3,lam)) )^2) };</span>
<span id="cb61-4"><a href="ChapModelSelection.html#cb61-4" tabindex="-1"></a>optim( sum(op*(0:4)), g, method=&quot;Brent&quot;, lower=0, upper=10)$par</span></code></pre></div>
<p>When one uses the full data to estimate the probabilities, the asymptotic distribution is <em>in between</em> chi-square distributions with parameters <span class="math inline">\(K-1\)</span> and <span class="math inline">\(K-1-s\)</span>. In practice it is common to ignore this subtlety and assume the limiting chi-square has <span class="math inline">\(K-1-s\)</span> degrees of freedom. Interestingly, this practical shortcut works quite well in the case of the Poisson distribution.</p>
<p>For the Singaporean auto data the Pearsons chi-square statistic equals <span class="math inline">\(41.98\)</span> using the full data <em>mle</em> for <span class="math inline">\({\lambda}\)</span>. Using the limiting distribution of chi-square with <span class="math inline">\(5-1-1=3\)</span> degrees of freedom, we see that the value of <span class="math inline">\(41.98\)</span> is way out in the tail (<span class="math inline">\(99\)</span>-th percentile is below <span class="math inline">\(12\)</span>). Hence we can conclude that the Poisson distribution provides an inadequate fit for the data.</p>
<p>In the above, we started with the cells as given in the above tabular summary. In practice, a relevant question is how to define the cells so that the chi-square distribution is a good approximation to the finite sample distribution of the statistic. A rule of thumb is to define the cells in such a way to have at least <span class="math inline">\(80\%\)</span>, if not all, of the cells having expected counts greater than <span class="math inline">\(5\)</span>. Also, it is clear that a larger number of cells results in a higher power of the test, and hence a simple rule of thumb is to maximize the number of cells such that each cell has at least 5 observations.</p>
</div>
</div>
</div>
<div id="S:Sec62" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Iterative Model Selection<a href="ChapModelSelection.html#S:Sec62" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In our model development, we examine the data graphically, hypothesize a
model structure, and compare the data to a candidate model in order to
formulate an improved model. <span class="citation">Box (<a href="bibliography.html#ref-box1980sampling">1980</a>)</span> describes this as an
<em>iterative process</em> which is shown in Figure <a href="ChapModelSelection.html#fig:Fig65">6.5</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:Fig65"></span>
<img src="Figures/F5Iterative.png" alt="Iterative Model Specification Process" width="80%" />
<p class="caption">
Figure 6.5: <strong>Iterative Model Specification Process</strong>
</p>
</div>
<p>This iterative process provides a useful recipe for structuring the task
of specifying a model to represent a set of data.</p>
<ol style="list-style-type: decimal">
<li>The first step, the model formulation stage, is accomplished by
examining the data graphically and using prior knowledge of
relationships, such as from economic theory or industry practice.</li>
<li>The second step in the iteration is fitting based on the assumptions
of the specified model. These assumptions must be consistent with
the data to make valid use of the model.</li>
<li>The third step is <em>diagnostic checking</em>; the data and model must be
consistent with one another before additional inferences can be
made. Diagnostic checking is an important part of the model
formulation; it can reveal mistakes made in previous steps and
provide ways to correct these mistakes.</li>
</ol>
<p>The iterative process also emphasizes the skills you need to make data
analytics work. First, you need a willingness to summarize information
numerically and portray this information graphically. Second, it is
important to develop an understanding of model properties. You should
understand how a probabilistic model behaves in order to match a set of
data to it. Third, theoretical properties of the model are also
important for inferring general relationships based on the behavior of
the data.</p>
</div>
<div id="S:Sec63" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Model Selection Based on a Training Dataset<a href="ChapModelSelection.html#S:Sec63" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As introduced in Section <a href="ChapDataAnalytics.html#S:Sec22">2.2</a>, it is common to refer to a
dataset used for fitting the model as a <em>training</em> or an <em>in-sample</em>
dataset. Techniques available for selecting a model depend upon whether
the outcomes <span class="math inline">\(X\)</span> are discrete, continuous, or a hybrid of the two,
although the principles are the same.</p>
<p><strong>Graphical and other Basic Summary Measures.</strong> Begin by summarizing the
data graphically and with statistics that do not rely on a specific
parametric form, as summarized in Section <a href="ChapSeverity.html#S:Sec441">4.4.1</a>.
Specifically, you will want to graph both the empirical distribution and
density functions. Particularly for loss data that contain many zeros
and that can be skewed, deciding on the appropriate scale (e.g.,
logarithmic) may present some difficulties. For discrete data, tables
are often preferred. Determine sample moments, such as the mean and
variance, as well as selected quantiles, including the minimum, maximum,
and the median. For discrete data, the mode (or most frequently
occurring value) is usually helpful.</p>
<p>These summaries, as well as your familiarity of industry practice, will
suggest one or more candidate parametric models. Generally, start with
the simpler parametric models (for example, one parameter exponential
before a two parameter gamma), gradually introducing more complexity
into the modeling process.</p>
<p>Critique the candidate parametric model numerically and graphically. For
the graphs, utilize the tools introduced in Section
<a href="ChapModelSelection.html#S:Sec61">6.1</a> such as <span class="math inline">\(pp\)</span> and <span class="math inline">\(qq\)</span> plots. For the
numerical assessments, examine the statistical significance of
parameters and try to eliminate parameters that do not provide
additional information. In addition to statistical significance of
parameters, you may use the following model comparison tools.</p>
<p><strong>Likelihood Ratio Tests.</strong> For comparing model fits, if one model is a
subset of another, then a likelihood ratio test may be employed; the
general approach to likelihood ratio testing is described in Appendix
Sections <a href="CAppA.html#S:Sec1743">17.4.3</a> and <a href="CAppC.html#S:Sec191">19.1</a>.</p>
<p><strong>Goodness of Fit Statistics.</strong> Generally, models are not proper subsets
of one another in which case overall goodness of fit statistics are
helpful for comparing models. <em>Information criteria</em> are one type of
goodness of statistic. The most widely used examples are Akaikes
Information Criterion (<em>AIC</em>) and the (Schwarz) Bayesian Information
Criterion (<em>BIC</em>); they are widely cited because they can be readily
generalized to multivariate settings. Appendix Section
<a href="CAppA.html#S:Sec1744">17.4.4</a> provides a summary of these statistics.</p>
<p>For selecting the appropriate distribution, statistics that compare a parametric fit to a nonparametric alternative, summarized in Section <a href="ChapModelSelection.html#S:Sec612">6.1.2</a>, are useful for model comparison. For discrete
data, a <em>goodness of fit</em> statistic is generally preferred as it is more intuitive and simpler to explain.</p>
</div>
<div id="S:Sec64" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Model Selection Based on a Test Dataset<a href="ChapModelSelection.html#S:Sec64" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="#" class="tooltip" style="color:green"><em>Model validation</em><span style="font-size:8pt">The process of confirming that the proposed model is appropriate.</span></a> introduced in Section <a href="ChapDataAnalytics.html#S:Sec22">2.2</a> is
the process of confirming that the proposed model is appropriate based
on a <em>test</em> or an <em>out-of-sample</em> dataset, especially in light of the
purposes of the investigation. Model validation is important since the
model selection process based only on training or in-sample data can be
susceptible to <a href="#" class="tooltip" style="color:green"><em>data-snooping</em><span style="font-size:8pt">Repeatedly fitting models to a data set without a prior hypothesis of interest.</span></a>, that is, fitting a great
number of models to a single set of data. By looking at a large number
of models, we may overfit the data and understate the natural variation
in our representation.</p>
<p>Selecting a model based only on in-sample data also does not support the
goal of <a href="#" class="tooltip" style="color:green"><em>predictive inference</em><span style="font-size:8pt">Preditive inference is the process of using past data observations to predict future observations.</span></a>. Particularly in actuarial
applications, our goal is to make statements about <em>new</em> experience
rather than a dataset at hand. For example, we use claims experience
from one year to develop a model that can be used to price insurance
contracts for the following year. As an analogy, we can think about the
training dataset as experience from one year that is used to predict the
behavior of the next years test dataset.</p>
<p>We can respond to these criticisms by using a technique known as
<em>out-of-sample validation</em>. The ideal situation is to have available
two sets of data, one for training, or model development, and the other
for testing, or model validation. We initially develop one or several
models on the first dataset that we call <em>candidate</em> models. Then, the
relative performance of the candidate models can be measured on the
second set of data. In this way, the data used to validate the model are
unaffected by the procedures used to formulate the model.</p>
<p><strong>Random Split of the Data.</strong> Unfortunately, rarely will two sets of
data be available to the investigator. As mentioned in Section
<a href="ChapDataAnalytics.html#S:Sec22">2.2</a>, we can implement the validation process by splitting
the dataset into <em>training</em> and <em>test</em> subsamples, respectively.
Figure <a href="ChapModelSelection.html#fig:Fig66">6.6</a> illustrates this splitting of the
data.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:Fig66"></span>
<img src="LDAEd2_files/figure-html/Fig66-1.png" alt="Model Validation. A dataset is randomly split into two subsamples." width="80%" />
<p class="caption">
Figure 6.6: <strong>Model Validation.</strong> A dataset is randomly split into two subsamples.
</p>
</div>
<p>Various researchers recommend different proportions for the allocation.
<span class="citation">Snee (<a href="bibliography.html#ref-snee1977validation">1977</a>)</span> suggests that data-splitting not be done unless the
sample size is moderately large. The guidelines of <span class="citation">Picard and Berk (<a href="bibliography.html#ref-picard1990data">1990</a>)</span> show
that the greater the number of parameters to be estimated, the greater
the proportion of observations is needed for the training subsample for
model development.</p>
<p><strong>Selecting a Distribution.</strong> Still, our focus so far has been to select
a distribution for a dataset that can be used for actuarial modeling
without additional explanatory or input variables <span class="math inline">\(x_1, \ldots, x_k\)</span>.
Even in this more fundamental problem, the model validation approach is
valuable. If we base all inference on only in-sample data, then there is
a tendency to select more complicated models than needed. For example,
we might select a four parameter GB2, generalized beta of the second
kind, distribution when only a two parameter Pareto is needed.
Information criteria such as <a href="#" class="tooltip" style="color:green"><em>AIC</em><span style="font-size:8pt">A goodness of fit measure of a statistical model that describes how well it fits a set of observations.</span></a> and <a href="#" class="tooltip" style="color:green"><em>BIC</em><span style="font-size:8pt">Bayesian information criterion</span></a>
introduced in Appendix Section <a href="CAppA.html#S:Sec1744">17.4.4</a> include penalties for
model complexity and thus provide protection against over-fitting, but
using a test sample may also help achieve parsimonious models. From a
quote often attributed to Albert Einstein, we want to use the simplest
model as possible but no simpler.</p>
<hr />
<p><strong>Example 6.4.1. Wisconsin Property Fund.</strong> For the 2010 property fund
data from Section <a href="ChapIntro.html#S:LGPIF">1.3</a>, we may try to select a severity
distribution based on out-of-sample prediction. In particular, we may
randomly select 1,000 observations as our training data, and use the
remaining 377 claims to validate the two models based respectively on
gamma and Pareto distributions. For illustration purposes, We compare
the Kolmogorov-Smirnov statistics respectively for the training and test
datasets using the models fitted from training data.</p>
<h5 style="text-align: center;">
<a id="displayCode.ValidationKS.1" href="javascript:togglecode('toggleCode.ValidationKS.1','displayCode.ValidationKS.1');"><i><strong>Show R Code for Kolmogorov-Smirnov model validation</strong></i></a>
</h5>
<div id="toggleCode.ValidationKS.1" style="display: none">
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="ChapModelSelection.html#cb62-1" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb62-2"><a href="ChapModelSelection.html#cb62-2" tabindex="-1"></a><span class="fu">library</span>(VGAM)</span>
<span id="cb62-3"><a href="ChapModelSelection.html#cb62-3" tabindex="-1"></a><span class="fu">library</span>(goftest)</span>
<span id="cb62-4"><a href="ChapModelSelection.html#cb62-4" tabindex="-1"></a>claim_lev <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Data/CLAIMLEVEL.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-5"><a href="ChapModelSelection.html#cb62-5" tabindex="-1"></a><span class="co"># 2010 subset</span></span>
<span id="cb62-6"><a href="ChapModelSelection.html#cb62-6" tabindex="-1"></a>claim_data <span class="ot">&lt;-</span> <span class="fu">subset</span>(claim_lev, Year <span class="sc">==</span> <span class="dv">2010</span>)</span>
<span id="cb62-7"><a href="ChapModelSelection.html#cb62-7" tabindex="-1"></a></span>
<span id="cb62-8"><a href="ChapModelSelection.html#cb62-8" tabindex="-1"></a><span class="co"># Randomly re-order the data - &#39;shuffle it&#39;</span></span>
<span id="cb62-9"><a href="ChapModelSelection.html#cb62-9" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(claim_data)</span>
<span id="cb62-10"><a href="ChapModelSelection.html#cb62-10" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb62-11"><a href="ChapModelSelection.html#cb62-11" tabindex="-1"></a>rdata <span class="ot">&lt;-</span> claim_data[<span class="fu">sample</span>(n), ]</span>
<span id="cb62-12"><a href="ChapModelSelection.html#cb62-12" tabindex="-1"></a></span>
<span id="cb62-13"><a href="ChapModelSelection.html#cb62-13" tabindex="-1"></a><span class="co"># Use training data to fit the models, and training and test data to calculate</span></span>
<span id="cb62-14"><a href="ChapModelSelection.html#cb62-14" tabindex="-1"></a><span class="co"># KS statistics</span></span>
<span id="cb62-15"><a href="ChapModelSelection.html#cb62-15" tabindex="-1"></a>train.id <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>  <span class="co"># indices for training data</span></span>
<span id="cb62-16"><a href="ChapModelSelection.html#cb62-16" tabindex="-1"></a></span>
<span id="cb62-17"><a href="ChapModelSelection.html#cb62-17" tabindex="-1"></a><span class="co"># Pareto</span></span>
<span id="cb62-18"><a href="ChapModelSelection.html#cb62-18" tabindex="-1"></a>fit.pareto <span class="ot">&lt;-</span> <span class="fu">vglm</span>(Claim <span class="sc">~</span> <span class="dv">1</span>, paretoII, <span class="at">loc =</span> <span class="dv">0</span>, <span class="at">data =</span> rdata[train.id, ])</span>
<span id="cb62-19"><a href="ChapModelSelection.html#cb62-19" tabindex="-1"></a>InSamplePareto <span class="ot">&lt;-</span> <span class="fu">ks.test</span>(rdata[train.id, ]<span class="sc">$</span>Claim, <span class="st">&quot;pparetoII&quot;</span>, <span class="at">loc =</span> <span class="dv">0</span>, <span class="at">shape =</span> <span class="fu">exp</span>(<span class="fu">coef</span>(fit.pareto)[<span class="dv">2</span>]),</span>
<span id="cb62-20"><a href="ChapModelSelection.html#cb62-20" tabindex="-1"></a>    <span class="at">scale =</span> <span class="fu">exp</span>(<span class="fu">coef</span>(fit.pareto)[<span class="dv">1</span>]))</span>
<span id="cb62-21"><a href="ChapModelSelection.html#cb62-21" tabindex="-1"></a>OutSamplePareto <span class="ot">&lt;-</span> <span class="fu">ks.test</span>(rdata[<span class="sc">-</span>train.id, ]<span class="sc">$</span>Claim, <span class="st">&quot;pparetoII&quot;</span>, <span class="at">loc =</span> <span class="dv">0</span>, <span class="at">shape =</span> <span class="fu">exp</span>(<span class="fu">coef</span>(fit.pareto)[<span class="dv">2</span>]),</span>
<span id="cb62-22"><a href="ChapModelSelection.html#cb62-22" tabindex="-1"></a>    <span class="at">scale =</span> <span class="fu">exp</span>(<span class="fu">coef</span>(fit.pareto)[<span class="dv">1</span>]))</span>
<span id="cb62-23"><a href="ChapModelSelection.html#cb62-23" tabindex="-1"></a><span class="co"># Gamma</span></span>
<span id="cb62-24"><a href="ChapModelSelection.html#cb62-24" tabindex="-1"></a>fit.gamma <span class="ot">&lt;-</span> <span class="fu">glm</span>(Claim <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> rdata[train.id, ], <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb62-25"><a href="ChapModelSelection.html#cb62-25" tabindex="-1"></a>gamma_theta <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">coef</span>(fit.gamma)) <span class="sc">*</span> <span class="fu">gamma.dispersion</span>(fit.gamma)</span>
<span id="cb62-26"><a href="ChapModelSelection.html#cb62-26" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span><span class="fu">gamma.dispersion</span>(fit.gamma)</span>
<span id="cb62-27"><a href="ChapModelSelection.html#cb62-27" tabindex="-1"></a>InSampleGamma <span class="ot">&lt;-</span> <span class="fu">ks.test</span>(rdata[train.id, ]<span class="sc">$</span>Claim, <span class="st">&quot;pgamma&quot;</span>, <span class="at">shape =</span> alpha, <span class="at">scale =</span> gamma_theta)</span>
<span id="cb62-28"><a href="ChapModelSelection.html#cb62-28" tabindex="-1"></a>OutSampleGamma <span class="ot">&lt;-</span> <span class="fu">ks.test</span>(rdata[<span class="sc">-</span>train.id, ]<span class="sc">$</span>Claim, <span class="st">&quot;pgamma&quot;</span>, <span class="at">shape =</span> alpha, <span class="at">scale =</span> gamma_theta)</span></code></pre></div>
<p>Based on in-sample prediction, the Kolmogorov-Smirnov goodness of fit
statistic for the gamma distribution turns out to be
0.2771 and for the Pareto
distribution is 0.046. Based on
out-of-sample prediction, the Kolmogorov-Smirnov goodness of fit
statistic for the gamma distribution turns out to be
0.2693 and for the Pareto
distribution is 0.0746. Based on
both in-sample and out-of-sample prediction, the Pareto model seems to
give considerably better goodness of fit under the random seed used in
the code for splitting the training and test data.</p>
</div>
<p><strong>Model Validation Statistics.</strong> In addition to the nonparametric tools
introduced earlier for comparing marginal distributions of the outcome
or output variables ignoring potential explanatory or input variables,
much of the literature supporting the establishment of a model
validation process is based on regression and classification models that
you can think of as an <em>input-output</em> problem (<span class="citation">James et al. (<a href="bibliography.html#ref-james2013introduction">2013</a>)</span>).
That is, we have several inputs or predictor variables
<span class="math inline">\(x_1, \ldots, x_k\)</span> that are related to an output or outcome <span class="math inline">\(y\)</span> through
a function such as <span class="math display">\[y = \mathrm{g}\left(x_1, \ldots, x_k\right).\]</span>For
model selection, one uses the training sample to develop an estimate of
<span class="math inline">\(\mathrm{g}\)</span>, say, <span class="math inline">\(\hat{\mathrm{g}}\)</span>, and then calibrate the average
distance from the observed outcomes to the predictions using a criterion
of the form
<span class="math display" id="eq:OutSampleCriter">\[\begin{equation}
\frac{1}{n}\sum_i \mathrm{d}(y_i,\hat{\mathrm{g}}\left(x_{i1}, \ldots, x_{ik}\right) ) .
\tag{6.1}
\end{equation}\]</span>
Here, d is some measure of distance and the sum <span class="math inline">\(i\)</span> is over the test
data. The function <span class="math inline">\(\mathrm{g}\)</span> may not have an analytical form and can
be estimated for each observation using the different different types of
algorithms and models introduced earlier in Section
<a href="ChapDataAnalytics.html#S:Sec24">2.4</a>. In many regression applications, it is common
to use the squared Euclidean distance of the form
<span class="math inline">\(\mathrm{d}(y_i,\mathrm{g}) = (y_i-\mathrm{g})^2\)</span> under which the
criterion in equation <a href="ChapModelSelection.html#eq:OutSampleCriter">(6.1)</a> is called the <em>mean squared error (<span class="math inline">\(MSE\)</span>)</em>. Using data simulated from linear models, Example
2.3.1 uses the <em>root mean squared error (Rmse)</em> which is the squared
root of the MSE. From equation <a href="ChapModelSelection.html#eq:OutSampleCriter">(6.1)</a>, the MSE
criteria works the best for linear models under normal distributions
with constant variance, as minimizing MSE is equivalent to the maximum
likelihood and least squares criterion in training data. In data
analytics and linear regression, one may consider transformations of the
outcome variable in order for the MSE criteria to work more effectively.
In actuarial applications, the <em>mean absolute error (<span class="math inline">\(MAE\)</span>)</em> under the
Euclidean distance <span class="math inline">\(\mathrm{d}(y_i,\mathrm{g}) = |y_i-\mathrm{g}|\)</span> may
be preferred because of the skewed nature of loss data. For right-skewed
outcomes, it may require a larger sample size for the validation
statistics to pickup the correct model when large outlying values of <span class="math inline">\(y\)</span>
can have a large effect on the measures.</p>
<p>Following Example 2.3.1, we use simulated data in Examples 6.4.2 through 6.4.4 to compare the AIC information criteria from Appendix Chapter <a href="CAppA.html#S:Sec1744">17.4.4</a> with
out-of-sample MSE and MAE criterion for selecting the distribution and
input variables for outcomes that are respectively from normal and
right-skewed distributions including lognormal and gamma distributions.
For right skewed distributions, we find that the AIC information
criteria seems to work consistently for selecting the correct
distributional form and mean structure (input variables), whereas
out-of-sample MSE and MAE may not work for right-skewed outcomes like
those from gamma distributions, even with relatively large sample sizes.
Therefore, model validation statistics commonly used in data analytics
may only work for minimizing specific cost functions, such as the MAE
that represents the average absolute error for out-of-sample prediction,
and do not necessarily guarantee correct selection of the underlying
data generating mechanism.</p>
<hr />
<h5 style="text-align: center;">
<a id="displayCode.Tab62.2Silly" href="javascript:togglecode('toggleCode.Tab62.2Silly','displayCode.Tab62.2Silly');"><i><strong></strong></i></a>
</h5>
<div id="toggleCode.Tab62.2Silly" style="display: none">
<table>
<caption><span id="tab:unnamed-chunk-82">Table 6.1: </span>Silly. Create a table just to update the counter</caption>
<thead>
<tr class="header">
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:unnamed-chunk-82">Table 6.1: </span>Silly. Create a table just to update the counter</caption>
<thead>
<tr class="header">
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:unnamed-chunk-82">Table 6.1: </span>Silly. Create a table just to update the counter</caption>
<thead>
<tr class="header">
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Example 6.4.2. In-sample AIC and out-of-sample MSE for normal outcomes</strong>. Example 2.3.1 assumes that there is a set of claims that
potentially varies by a single categorical variable with six levels. To
illustrating in-sample over-fitting, it also assumes that two of the six
levels share a common mean that differs from rest of levels. For Example
2.3.1, the claim amounts were generated from a linear model with
constant variance, for which in-sample AIC and out-of-sample Rmse
provide consistent results from the cross-validation procedure to be
introduced in the next section. Here, we may use the same data
generation mechanism to compare the performance of in-sample AIC with
the in-sample and out-of-sample Rmse criteria. In particular, we
generate a total of 200 samples and split them equally into the training
and test datasets. From Table <a href="ChapModelSelection.html#tab:Tab64">6.2</a>, we observe the two-level model was correctly selected by both in-sample AIC and out-of-sample MSE
criteria, whereas in-sample MSE prefers an over-fitted model with six
levels. Thus, due to concerns of model over-fitting, we do not use
in-sample distance measures such as the MSE and MAE criterion that
favors more complicated models.</p>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Tab64">Table 6.2: </span><strong>Model Selection based on MSE and AIC for normal outputs</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Community Rating
</th>
<th style="text-align:center;">
Two Levels
</th>
<th style="text-align:center;">
Six Levels
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.186
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.016
</td>
<td style="text-align:center;">
0.990
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Test
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.081
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.958
</td>
<td style="text-align:center;">
1.012
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
AIC - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
321.935
</td>
<td style="text-align:center;min-width: 3.0cm; ">
293.028
</td>
<td style="text-align:center;">
295.694
</td>
</tr>
</tbody>
</table>
<h5 style="text-align: center;">
<a id="displayCode.Example642.Hide" href="javascript:togglecode('toggleCode.Example642.Hide','displayCode.Example642.Hide');"><i><strong>Show R Code for Example 6.4.2</strong></i></a>
</h5>
<div id="toggleCode.Example642.Hide" style="display: none">
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="ChapModelSelection.html#cb63-1" tabindex="-1"></a><span class="fu">library</span>(Metrics)</span>
<span id="cb63-2"><a href="ChapModelSelection.html#cb63-2" tabindex="-1"></a></span>
<span id="cb63-3"><a href="ChapModelSelection.html#cb63-3" tabindex="-1"></a>rmse <span class="ot">&lt;-</span> Metrics<span class="sc">::</span>rmse</span>
<span id="cb63-4"><a href="ChapModelSelection.html#cb63-4" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb63-5"><a href="ChapModelSelection.html#cb63-5" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb63-6"><a href="ChapModelSelection.html#cb63-6" tabindex="-1"></a>u <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">6</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-7"><a href="ChapModelSelection.html#cb63-7" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>((u <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">+</span> (u <span class="sc">==</span> <span class="dv">5</span>))</span>
<span id="cb63-8"><a href="ChapModelSelection.html#cb63-8" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(u)</span>
<span id="cb63-9"><a href="ChapModelSelection.html#cb63-9" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">*</span> (x1 <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">rnorm</span>(n, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb63-10"><a href="ChapModelSelection.html#cb63-10" tabindex="-1"></a>xyData <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x1, x2, y)</span>
<span id="cb63-11"><a href="ChapModelSelection.html#cb63-11" tabindex="-1"></a></span>
<span id="cb63-12"><a href="ChapModelSelection.html#cb63-12" tabindex="-1"></a><span class="co"># Use training data to fit the models, and training and test data to obtain MSE</span></span>
<span id="cb63-13"><a href="ChapModelSelection.html#cb63-13" tabindex="-1"></a>train.id <span class="ot">&lt;-</span> <span class="fu">sample</span>(n, n<span class="sc">/</span><span class="dv">2</span>)  <span class="co"># indices for training data</span></span>
<span id="cb63-14"><a href="ChapModelSelection.html#cb63-14" tabindex="-1"></a>Rmse.train <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">3</span>) <span class="ot">-&gt;</span> Rmse.test <span class="ot">-&gt;</span> AIC.train</span>
<span id="cb63-15"><a href="ChapModelSelection.html#cb63-15" tabindex="-1"></a></span>
<span id="cb63-16"><a href="ChapModelSelection.html#cb63-16" tabindex="-1"></a>test <span class="ot">&lt;-</span> xyData[<span class="sc">-</span>train.id, ]</span>
<span id="cb63-17"><a href="ChapModelSelection.html#cb63-17" tabindex="-1"></a>train <span class="ot">&lt;-</span> xyData[train.id, ]</span>
<span id="cb63-18"><a href="ChapModelSelection.html#cb63-18" tabindex="-1"></a>model0 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train)</span>
<span id="cb63-19"><a href="ChapModelSelection.html#cb63-19" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x1, <span class="at">data =</span> train)</span>
<span id="cb63-20"><a href="ChapModelSelection.html#cb63-20" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x2, <span class="at">data =</span> train)</span>
<span id="cb63-21"><a href="ChapModelSelection.html#cb63-21" tabindex="-1"></a></span>
<span id="cb63-22"><a href="ChapModelSelection.html#cb63-22" tabindex="-1"></a>Rmse.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model0))</span>
<span id="cb63-23"><a href="ChapModelSelection.html#cb63-23" tabindex="-1"></a>Rmse.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model1))</span>
<span id="cb63-24"><a href="ChapModelSelection.html#cb63-24" tabindex="-1"></a>Rmse.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model2))</span>
<span id="cb63-25"><a href="ChapModelSelection.html#cb63-25" tabindex="-1"></a>Rmse.test[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model0, test))</span>
<span id="cb63-26"><a href="ChapModelSelection.html#cb63-26" tabindex="-1"></a>Rmse.test[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model1, test))</span>
<span id="cb63-27"><a href="ChapModelSelection.html#cb63-27" tabindex="-1"></a>Rmse.test[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model2, test))</span>
<span id="cb63-28"><a href="ChapModelSelection.html#cb63-28" tabindex="-1"></a>AIC.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model0)</span>
<span id="cb63-29"><a href="ChapModelSelection.html#cb63-29" tabindex="-1"></a>AIC.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model1)</span>
<span id="cb63-30"><a href="ChapModelSelection.html#cb63-30" tabindex="-1"></a>AIC.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model2)</span>
<span id="cb63-31"><a href="ChapModelSelection.html#cb63-31" tabindex="-1"></a></span>
<span id="cb63-32"><a href="ChapModelSelection.html#cb63-32" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(Rmse.train, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(Rmse.test, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(AIC.train,</span>
<span id="cb63-33"><a href="ChapModelSelection.html#cb63-33" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb63-34"><a href="ChapModelSelection.html#cb63-34" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Community Rating&quot;</span>, <span class="st">&quot;Two Levels&quot;</span>, <span class="st">&quot;Six Levels&quot;</span>)</span>
<span id="cb63-35"><a href="ChapModelSelection.html#cb63-35" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rmse - Train&quot;</span>, <span class="st">&quot;Rmse - Test&quot;</span>, <span class="st">&quot;AIC - Train&quot;</span>)</span>
<span id="cb63-36"><a href="ChapModelSelection.html#cb63-36" tabindex="-1"></a></span>
<span id="cb63-37"><a href="ChapModelSelection.html#cb63-37" tabindex="-1"></a></span>
<span id="cb63-38"><a href="ChapModelSelection.html#cb63-38" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Model Selection based on MSE and AIC for normal outputs&quot;</span>,</span>
<span id="cb63-39"><a href="ChapModelSelection.html#cb63-39" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
</div>
<hr />
<p><strong>Example 6.4.3. MSE and MAE for right-skewed outcomes - lognormal claims</strong>. For claims modeling, one may wonder how the MSE and MAE types
of criterion may perform for right-skewed data. Using the same data
generating procedure, we may generate lognormal claim amounts by
exponentiating the normal outcomes from the previous example. We fit the
lognormal claim amounts with lognormal and gamma regression commonly
used for ratemaking and claims analytics. Results are summarized in Tables <a href="ChapModelSelection.html#tab:Tab65">6.3</a> and <a href="ChapModelSelection.html#tab:Tab66">6.4</a>, respectively. For the specific data
generating mechanism, we observe that it requires a larger sample size
for out-of-sample Rmse and MAE to select the correct distributional form
and mean structure, when compared with in-sample AIC criteria. The AIC
criteria is able to pick out the correct model with a sample size of
200, while out-of-sample MSE and MAE fail to. Thus, for right skewed
output, precautions need to be taken when using model validation
statistics that may be sensitive to large claim values, particularly
when the sample size is relatively small.</p>
<div style="page-break-after: always;"></div>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Tab65">Table 6.3: </span><strong>Model Selection based on in-sample AIC and out-of-sample MSE and MAE from lognormal model</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Community Rating
</th>
<th style="text-align:center;">
Two Levels
</th>
<th style="text-align:center;">
Six Levels
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.365
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.185
</td>
<td style="text-align:center;">
4.192
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Test
</td>
<td style="text-align:center;min-width: 3.0cm; ">
3.881
</td>
<td style="text-align:center;min-width: 3.0cm; ">
3.686
</td>
<td style="text-align:center;">
3.679
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.077
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.821
</td>
<td style="text-align:center;">
1.807
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Test
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.166
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.056
</td>
<td style="text-align:center;">
2.073
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
AIC - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1800.716
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1681.550
</td>
<td style="text-align:center;">
1686.142
</td>
</tr>
</tbody>
</table>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Tab66">Table 6.4: </span><strong>Model Selection based on in-sample AIC and out-of-sample MSE and MAE from gamma model</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Community Rating
</th>
<th style="text-align:center;">
Two Levels
</th>
<th style="text-align:center;">
Six Levels
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.634
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.572
</td>
<td style="text-align:center;">
4.572
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Test
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.298
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.232
</td>
<td style="text-align:center;">
4.235
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.862
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.815
</td>
<td style="text-align:center;">
1.817
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Test
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.127
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.123
</td>
<td style="text-align:center;">
2.128
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
AIC - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1906.398
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1789.312
</td>
<td style="text-align:center;">
1795.662
</td>
</tr>
</tbody>
</table>
<h5 style="text-align: center;">
<a id="displayCode.Example643.Hide" href="javascript:togglecode('toggleCode.Example643.Hide','displayCode.Example643.Hide');"><i><strong>Show R Code for Example 6.4.3</strong></i></a>
</h5>
<div id="toggleCode.Example643.Hide" style="display: none">
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="ChapModelSelection.html#cb64-1" tabindex="-1"></a><span class="fu">library</span>(Metrics)</span>
<span id="cb64-2"><a href="ChapModelSelection.html#cb64-2" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb64-3"><a href="ChapModelSelection.html#cb64-3" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb64-4"><a href="ChapModelSelection.html#cb64-4" tabindex="-1"></a>u <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">6</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb64-5"><a href="ChapModelSelection.html#cb64-5" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>((u <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">+</span> (u <span class="sc">==</span> <span class="dv">5</span>))</span>
<span id="cb64-6"><a href="ChapModelSelection.html#cb64-6" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(u)</span>
<span id="cb64-7"><a href="ChapModelSelection.html#cb64-7" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">*</span> (x1 <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">rnorm</span>(n, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb64-8"><a href="ChapModelSelection.html#cb64-8" tabindex="-1"></a>exp.y <span class="ot">&lt;-</span> <span class="fu">exp</span>(y)</span>
<span id="cb64-9"><a href="ChapModelSelection.html#cb64-9" tabindex="-1"></a>xyData <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x1, x2, y, exp.y)</span>
<span id="cb64-10"><a href="ChapModelSelection.html#cb64-10" tabindex="-1"></a></span>
<span id="cb64-11"><a href="ChapModelSelection.html#cb64-11" tabindex="-1"></a><span class="co"># Use training data to fit the models, and training and test data to obtain</span></span>
<span id="cb64-12"><a href="ChapModelSelection.html#cb64-12" tabindex="-1"></a><span class="co"># MSE/MAE</span></span>
<span id="cb64-13"><a href="ChapModelSelection.html#cb64-13" tabindex="-1"></a>train.id <span class="ot">&lt;-</span> <span class="fu">sample</span>(n, n<span class="sc">/</span><span class="dv">2</span>)  <span class="co"># indices for training data</span></span>
<span id="cb64-14"><a href="ChapModelSelection.html#cb64-14" tabindex="-1"></a></span>
<span id="cb64-15"><a href="ChapModelSelection.html#cb64-15" tabindex="-1"></a>Rmse.train <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">3</span>) <span class="ot">-&gt;</span> Rmse.test <span class="ot">-&gt;</span> mae.train <span class="ot">-&gt;</span> mae.test <span class="ot">-&gt;</span> AIC.train</span>
<span id="cb64-16"><a href="ChapModelSelection.html#cb64-16" tabindex="-1"></a></span>
<span id="cb64-17"><a href="ChapModelSelection.html#cb64-17" tabindex="-1"></a>test <span class="ot">&lt;-</span> xyData[<span class="sc">-</span>train.id, ]</span>
<span id="cb64-18"><a href="ChapModelSelection.html#cb64-18" tabindex="-1"></a>train <span class="ot">&lt;-</span> xyData[train.id, ]</span>
<span id="cb64-19"><a href="ChapModelSelection.html#cb64-19" tabindex="-1"></a></span>
<span id="cb64-20"><a href="ChapModelSelection.html#cb64-20" tabindex="-1"></a><span class="co"># fit normal models</span></span>
<span id="cb64-21"><a href="ChapModelSelection.html#cb64-21" tabindex="-1"></a>model0 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train)</span>
<span id="cb64-22"><a href="ChapModelSelection.html#cb64-22" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x1, <span class="at">data =</span> train)</span>
<span id="cb64-23"><a href="ChapModelSelection.html#cb64-23" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x2, <span class="at">data =</span> train)</span>
<span id="cb64-24"><a href="ChapModelSelection.html#cb64-24" tabindex="-1"></a></span>
<span id="cb64-25"><a href="ChapModelSelection.html#cb64-25" tabindex="-1"></a><span class="co"># calculate Rmse and MAE based on the predicted mean from lognormal</span></span>
<span id="cb64-26"><a href="ChapModelSelection.html#cb64-26" tabindex="-1"></a><span class="co"># distributions</span></span>
<span id="cb64-27"><a href="ChapModelSelection.html#cb64-27" tabindex="-1"></a>Rmse.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-28"><a href="ChapModelSelection.html#cb64-28" tabindex="-1"></a>Rmse.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-29"><a href="ChapModelSelection.html#cb64-29" tabindex="-1"></a>Rmse.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-30"><a href="ChapModelSelection.html#cb64-30" tabindex="-1"></a>Rmse.test[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0, test) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-31"><a href="ChapModelSelection.html#cb64-31" tabindex="-1"></a>Rmse.test[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1, test) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-32"><a href="ChapModelSelection.html#cb64-32" tabindex="-1"></a>Rmse.test[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2, test) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-33"><a href="ChapModelSelection.html#cb64-33" tabindex="-1"></a></span>
<span id="cb64-34"><a href="ChapModelSelection.html#cb64-34" tabindex="-1"></a>mae.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-35"><a href="ChapModelSelection.html#cb64-35" tabindex="-1"></a>mae.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-36"><a href="ChapModelSelection.html#cb64-36" tabindex="-1"></a>mae.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-37"><a href="ChapModelSelection.html#cb64-37" tabindex="-1"></a>mae.test[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0, test) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-38"><a href="ChapModelSelection.html#cb64-38" tabindex="-1"></a>mae.test[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1, test) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-39"><a href="ChapModelSelection.html#cb64-39" tabindex="-1"></a>mae.test[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2, test) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb64-40"><a href="ChapModelSelection.html#cb64-40" tabindex="-1"></a></span>
<span id="cb64-41"><a href="ChapModelSelection.html#cb64-41" tabindex="-1"></a><span class="co"># AIC(model0) 2*2-2*sum(dnorm(train$y,predict(model0),sigma(model0),log = T))</span></span>
<span id="cb64-42"><a href="ChapModelSelection.html#cb64-42" tabindex="-1"></a>AIC.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model0<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model0),</span>
<span id="cb64-43"><a href="ChapModelSelection.html#cb64-43" tabindex="-1"></a>    <span class="fu">sigma</span>(model0), <span class="at">log =</span> T))</span>
<span id="cb64-44"><a href="ChapModelSelection.html#cb64-44" tabindex="-1"></a>AIC.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model1<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model1),</span>
<span id="cb64-45"><a href="ChapModelSelection.html#cb64-45" tabindex="-1"></a>    <span class="fu">sigma</span>(model1), <span class="at">log =</span> T))</span>
<span id="cb64-46"><a href="ChapModelSelection.html#cb64-46" tabindex="-1"></a>AIC.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model2<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model2),</span>
<span id="cb64-47"><a href="ChapModelSelection.html#cb64-47" tabindex="-1"></a>    <span class="fu">sigma</span>(model2), <span class="at">log =</span> T))</span>
<span id="cb64-48"><a href="ChapModelSelection.html#cb64-48" tabindex="-1"></a></span>
<span id="cb64-49"><a href="ChapModelSelection.html#cb64-49" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(Rmse.train, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(Rmse.test, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(mae.train,</span>
<span id="cb64-50"><a href="ChapModelSelection.html#cb64-50" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(mae.test, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(AIC.train, <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb64-51"><a href="ChapModelSelection.html#cb64-51" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Community Rating&quot;</span>, <span class="st">&quot;Two Levels&quot;</span>, <span class="st">&quot;Six Levels&quot;</span>)</span>
<span id="cb64-52"><a href="ChapModelSelection.html#cb64-52" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rmse - Train&quot;</span>, <span class="st">&quot;Rmse - Test&quot;</span>, <span class="st">&quot;MAE - Train&quot;</span>, <span class="st">&quot;MAE - Test&quot;</span>,</span>
<span id="cb64-53"><a href="ChapModelSelection.html#cb64-53" tabindex="-1"></a>    <span class="st">&quot;AIC - Train&quot;</span>)</span>
<span id="cb64-54"><a href="ChapModelSelection.html#cb64-54" tabindex="-1"></a></span>
<span id="cb64-55"><a href="ChapModelSelection.html#cb64-55" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Model Selection based on in-sample AIC and out-of-sample MSE and MAE from lognormal model&quot;</span>,</span>
<span id="cb64-56"><a href="ChapModelSelection.html#cb64-56" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="ChapModelSelection.html#cb65-1" tabindex="-1"></a><span class="co"># fit gamma models</span></span>
<span id="cb65-2"><a href="ChapModelSelection.html#cb65-2" tabindex="-1"></a>model0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(exp.y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb65-3"><a href="ChapModelSelection.html#cb65-3" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(exp.y <span class="sc">~</span> x1, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb65-4"><a href="ChapModelSelection.html#cb65-4" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(exp.y <span class="sc">~</span> x2, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb65-5"><a href="ChapModelSelection.html#cb65-5" tabindex="-1"></a></span>
<span id="cb65-6"><a href="ChapModelSelection.html#cb65-6" tabindex="-1"></a><span class="co"># calculate Rmse and MAE based on the predicted mean from gamma distributions</span></span>
<span id="cb65-7"><a href="ChapModelSelection.html#cb65-7" tabindex="-1"></a>Rmse.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model0))</span>
<span id="cb65-8"><a href="ChapModelSelection.html#cb65-8" tabindex="-1"></a>Rmse.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model1))</span>
<span id="cb65-9"><a href="ChapModelSelection.html#cb65-9" tabindex="-1"></a>Rmse.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model2))</span>
<span id="cb65-10"><a href="ChapModelSelection.html#cb65-10" tabindex="-1"></a>Rmse.test[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model0, test))</span>
<span id="cb65-11"><a href="ChapModelSelection.html#cb65-11" tabindex="-1"></a>Rmse.test[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model1, test))</span>
<span id="cb65-12"><a href="ChapModelSelection.html#cb65-12" tabindex="-1"></a>Rmse.test[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model2, test))</span>
<span id="cb65-13"><a href="ChapModelSelection.html#cb65-13" tabindex="-1"></a></span>
<span id="cb65-14"><a href="ChapModelSelection.html#cb65-14" tabindex="-1"></a>mae.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model0))</span>
<span id="cb65-15"><a href="ChapModelSelection.html#cb65-15" tabindex="-1"></a>mae.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model1))</span>
<span id="cb65-16"><a href="ChapModelSelection.html#cb65-16" tabindex="-1"></a>mae.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model2))</span>
<span id="cb65-17"><a href="ChapModelSelection.html#cb65-17" tabindex="-1"></a>mae.test[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model0, test))</span>
<span id="cb65-18"><a href="ChapModelSelection.html#cb65-18" tabindex="-1"></a>mae.test[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model1, test))</span>
<span id="cb65-19"><a href="ChapModelSelection.html#cb65-19" tabindex="-1"></a>mae.test[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model2, test))</span>
<span id="cb65-20"><a href="ChapModelSelection.html#cb65-20" tabindex="-1"></a></span>
<span id="cb65-21"><a href="ChapModelSelection.html#cb65-21" tabindex="-1"></a>AIC.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model0)</span>
<span id="cb65-22"><a href="ChapModelSelection.html#cb65-22" tabindex="-1"></a>AIC.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model1)</span>
<span id="cb65-23"><a href="ChapModelSelection.html#cb65-23" tabindex="-1"></a>AIC.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model2)</span>
<span id="cb65-24"><a href="ChapModelSelection.html#cb65-24" tabindex="-1"></a></span>
<span id="cb65-25"><a href="ChapModelSelection.html#cb65-25" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(Rmse.train, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(Rmse.test, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(mae.train,</span>
<span id="cb65-26"><a href="ChapModelSelection.html#cb65-26" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(mae.test, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(AIC.train, <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb65-27"><a href="ChapModelSelection.html#cb65-27" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Community Rating&quot;</span>, <span class="st">&quot;Two Levels&quot;</span>, <span class="st">&quot;Six Levels&quot;</span>)</span>
<span id="cb65-28"><a href="ChapModelSelection.html#cb65-28" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rmse - Train&quot;</span>, <span class="st">&quot;Rmse - Test&quot;</span>, <span class="st">&quot;MAE - Train&quot;</span>, <span class="st">&quot;MAE - Test&quot;</span>,</span>
<span id="cb65-29"><a href="ChapModelSelection.html#cb65-29" tabindex="-1"></a>    <span class="st">&quot;AIC - Train&quot;</span>)</span>
<span id="cb65-30"><a href="ChapModelSelection.html#cb65-30" tabindex="-1"></a></span>
<span id="cb65-31"><a href="ChapModelSelection.html#cb65-31" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Model Selection based on in-sample AIC and out-of-sample MSE and MAE from gamma model&quot;</span>,</span>
<span id="cb65-32"><a href="ChapModelSelection.html#cb65-32" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
</div>
<hr />
<p><strong>Example 6.4.4. MSE and MAE for right-skewed outcomes - gamma claims</strong>.
For right-skewed outcomes, we may be interested in studying how the MSE
and MAE types of measures work for another loss severity distribution,
the gamma distribution, that is widely used in ratemaking and claims
analytics. Here, we use a similar mean structure for generating claims
amounts based on a gamma regression with the log link function. We fit
the data using lognormal and gamma regression. Results are summarized in Tables <a href="ChapModelSelection.html#tab:Tab67">6.5</a> and <a href="ChapModelSelection.html#tab:Tab68">6.6</a>, respectively. For gamma
outcomes, Table <a href="ChapModelSelection.html#tab:Tab68">6.6</a> shows that out-of-sample MSE and MAE criterion fail to select the correct distributional form or the mean structure even with a total of 1000 samples. By changing the gamma shape parameter, you
may see that the out-of-sample MSE and MAE criterion work in certain
settings for correctly selecting the distributional form or the mean
structure, but the performance of such model validation statistics does
not seem to be consistent across different parameter values and sample
sizes for right-skewed gamma outcomes. Again, the AIC criteria seems to
be working consistently in selecting the correct distribution and mean
structure for the data generated from gamma distributions, even with a
smaller sample size of 200.</p>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Tab67">Table 6.5: </span><strong>Model Selection based on in-sample AIC and out-of-sample MSE and MAE from lognormal model</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Community Rating
</th>
<th style="text-align:center;">
Two Levels
</th>
<th style="text-align:center;">
Six Levels
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.083
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.763
</td>
<td style="text-align:center;">
0.760
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Test
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.128
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.815
</td>
<td style="text-align:center;">
0.812
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.800
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.535
</td>
<td style="text-align:center;">
0.529
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Test
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.830
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.565
</td>
<td style="text-align:center;">
0.566
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
AIC - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1212.218
</td>
<td style="text-align:center;min-width: 3.0cm; ">
864.776
</td>
<td style="text-align:center;">
868.794
</td>
</tr>
</tbody>
</table>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Tab68">Table 6.6: </span><strong>Model Selection based on in-sample AIC and out-of-sample MSE and MAE from gamma model</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Community Rating
</th>
<th style="text-align:center;">
Two Levels
</th>
<th style="text-align:center;">
Six Levels
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.553
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.476
</td>
<td style="text-align:center;">
1.475
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Test
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.594
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.523
</td>
<td style="text-align:center;">
1.522
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.121
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.226
</td>
<td style="text-align:center;">
1.227
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Test
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.138
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.253
</td>
<td style="text-align:center;">
1.253
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
AIC - Train
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1249.211
</td>
<td style="text-align:center;min-width: 3.0cm; ">
852.292
</td>
<td style="text-align:center;">
856.850
</td>
</tr>
</tbody>
</table>
<h5 style="text-align: center;">
<a id="displayCode.Example644.Hide" href="javascript:togglecode('toggleCode.Example644.Hide','displayCode.Example644.Hide');"><i><strong>Show R Code for Example 6.4.4</strong></i></a>
</h5>
<div id="toggleCode.Example644.Hide" style="display: none">
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="ChapModelSelection.html#cb66-1" tabindex="-1"></a><span class="fu">library</span>(Metrics)</span>
<span id="cb66-2"><a href="ChapModelSelection.html#cb66-2" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb66-3"><a href="ChapModelSelection.html#cb66-3" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb66-4"><a href="ChapModelSelection.html#cb66-4" tabindex="-1"></a>u <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">6</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb66-5"><a href="ChapModelSelection.html#cb66-5" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>((u <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">+</span> (u <span class="sc">==</span> <span class="dv">5</span>))</span>
<span id="cb66-6"><a href="ChapModelSelection.html#cb66-6" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(u)</span>
<span id="cb66-7"><a href="ChapModelSelection.html#cb66-7" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">as.numeric</span>(x1 <span class="sc">==</span> <span class="dv">1</span>))  <span class="co"># gamma mean</span></span>
<span id="cb66-8"><a href="ChapModelSelection.html#cb66-8" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb66-9"><a href="ChapModelSelection.html#cb66-9" tabindex="-1"></a>beta <span class="ot">&lt;-</span> alpha<span class="sc">/</span>mu</span>
<span id="cb66-10"><a href="ChapModelSelection.html#cb66-10" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rgamma</span>(n, alpha, beta)</span>
<span id="cb66-11"><a href="ChapModelSelection.html#cb66-11" tabindex="-1"></a>log.y <span class="ot">&lt;-</span> <span class="fu">log</span>(y)</span>
<span id="cb66-12"><a href="ChapModelSelection.html#cb66-12" tabindex="-1"></a>xyData <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x1, x2, y, log.y)</span>
<span id="cb66-13"><a href="ChapModelSelection.html#cb66-13" tabindex="-1"></a></span>
<span id="cb66-14"><a href="ChapModelSelection.html#cb66-14" tabindex="-1"></a><span class="co"># Use training data to fit the models, and training and test data to obtain</span></span>
<span id="cb66-15"><a href="ChapModelSelection.html#cb66-15" tabindex="-1"></a><span class="co"># MSE/MAE</span></span>
<span id="cb66-16"><a href="ChapModelSelection.html#cb66-16" tabindex="-1"></a>train.id <span class="ot">&lt;-</span> <span class="fu">sample</span>(n, n<span class="sc">/</span><span class="dv">2</span>)  <span class="co"># indices for training data</span></span>
<span id="cb66-17"><a href="ChapModelSelection.html#cb66-17" tabindex="-1"></a></span>
<span id="cb66-18"><a href="ChapModelSelection.html#cb66-18" tabindex="-1"></a>Rmse.train <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">3</span>) <span class="ot">-&gt;</span> Rmse.test <span class="ot">-&gt;</span> mae.train <span class="ot">-&gt;</span> mae.test <span class="ot">-&gt;</span> AIC.train</span>
<span id="cb66-19"><a href="ChapModelSelection.html#cb66-19" tabindex="-1"></a></span>
<span id="cb66-20"><a href="ChapModelSelection.html#cb66-20" tabindex="-1"></a>test <span class="ot">&lt;-</span> xyData[<span class="sc">-</span>train.id, ]</span>
<span id="cb66-21"><a href="ChapModelSelection.html#cb66-21" tabindex="-1"></a>train <span class="ot">&lt;-</span> xyData[train.id, ]</span>
<span id="cb66-22"><a href="ChapModelSelection.html#cb66-22" tabindex="-1"></a></span>
<span id="cb66-23"><a href="ChapModelSelection.html#cb66-23" tabindex="-1"></a><span class="co"># fit normal models</span></span>
<span id="cb66-24"><a href="ChapModelSelection.html#cb66-24" tabindex="-1"></a>model0 <span class="ot">&lt;-</span> <span class="fu">lm</span>(log.y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train)</span>
<span id="cb66-25"><a href="ChapModelSelection.html#cb66-25" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(log.y <span class="sc">~</span> x1, <span class="at">data =</span> train)</span>
<span id="cb66-26"><a href="ChapModelSelection.html#cb66-26" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(log.y <span class="sc">~</span> x2, <span class="at">data =</span> train)</span>
<span id="cb66-27"><a href="ChapModelSelection.html#cb66-27" tabindex="-1"></a></span>
<span id="cb66-28"><a href="ChapModelSelection.html#cb66-28" tabindex="-1"></a><span class="co"># calculate Rmse and MAE based on the predicted mean from lognormal</span></span>
<span id="cb66-29"><a href="ChapModelSelection.html#cb66-29" tabindex="-1"></a><span class="co"># distributions</span></span>
<span id="cb66-30"><a href="ChapModelSelection.html#cb66-30" tabindex="-1"></a>Rmse.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-31"><a href="ChapModelSelection.html#cb66-31" tabindex="-1"></a>Rmse.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-32"><a href="ChapModelSelection.html#cb66-32" tabindex="-1"></a>Rmse.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-33"><a href="ChapModelSelection.html#cb66-33" tabindex="-1"></a>Rmse.test[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0, test) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-34"><a href="ChapModelSelection.html#cb66-34" tabindex="-1"></a>Rmse.test[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1, test) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-35"><a href="ChapModelSelection.html#cb66-35" tabindex="-1"></a>Rmse.test[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2, test) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-36"><a href="ChapModelSelection.html#cb66-36" tabindex="-1"></a></span>
<span id="cb66-37"><a href="ChapModelSelection.html#cb66-37" tabindex="-1"></a>mae.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-38"><a href="ChapModelSelection.html#cb66-38" tabindex="-1"></a>mae.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-39"><a href="ChapModelSelection.html#cb66-39" tabindex="-1"></a>mae.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-40"><a href="ChapModelSelection.html#cb66-40" tabindex="-1"></a>mae.test[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0, test) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-41"><a href="ChapModelSelection.html#cb66-41" tabindex="-1"></a>mae.test[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1, test) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-42"><a href="ChapModelSelection.html#cb66-42" tabindex="-1"></a>mae.test[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2, test) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb66-43"><a href="ChapModelSelection.html#cb66-43" tabindex="-1"></a></span>
<span id="cb66-44"><a href="ChapModelSelection.html#cb66-44" tabindex="-1"></a><span class="co"># AIC(model0) 2*2-2*sum(dnorm(train$y,predict(model0),sigma(model0),log = T))</span></span>
<span id="cb66-45"><a href="ChapModelSelection.html#cb66-45" tabindex="-1"></a>AIC.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model0<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model0),</span>
<span id="cb66-46"><a href="ChapModelSelection.html#cb66-46" tabindex="-1"></a>    <span class="fu">sigma</span>(model0), <span class="at">log =</span> T))</span>
<span id="cb66-47"><a href="ChapModelSelection.html#cb66-47" tabindex="-1"></a>AIC.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model1<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model1),</span>
<span id="cb66-48"><a href="ChapModelSelection.html#cb66-48" tabindex="-1"></a>    <span class="fu">sigma</span>(model1), <span class="at">log =</span> T))</span>
<span id="cb66-49"><a href="ChapModelSelection.html#cb66-49" tabindex="-1"></a>AIC.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model2<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model2),</span>
<span id="cb66-50"><a href="ChapModelSelection.html#cb66-50" tabindex="-1"></a>    <span class="fu">sigma</span>(model2), <span class="at">log =</span> T))</span>
<span id="cb66-51"><a href="ChapModelSelection.html#cb66-51" tabindex="-1"></a></span>
<span id="cb66-52"><a href="ChapModelSelection.html#cb66-52" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(Rmse.train, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(Rmse.test, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(mae.train,</span>
<span id="cb66-53"><a href="ChapModelSelection.html#cb66-53" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(mae.test, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(AIC.train, <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb66-54"><a href="ChapModelSelection.html#cb66-54" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Community Rating&quot;</span>, <span class="st">&quot;Two Levels&quot;</span>, <span class="st">&quot;Six Levels&quot;</span>)</span>
<span id="cb66-55"><a href="ChapModelSelection.html#cb66-55" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rmse - Train&quot;</span>, <span class="st">&quot;Rmse - Test&quot;</span>, <span class="st">&quot;MAE - Train&quot;</span>, <span class="st">&quot;MAE - Test&quot;</span>,</span>
<span id="cb66-56"><a href="ChapModelSelection.html#cb66-56" tabindex="-1"></a>    <span class="st">&quot;AIC - Train&quot;</span>)</span>
<span id="cb66-57"><a href="ChapModelSelection.html#cb66-57" tabindex="-1"></a></span>
<span id="cb66-58"><a href="ChapModelSelection.html#cb66-58" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Model Selection based on in-sample AIC and out-of-sample MSE and MAE from lognormal model&quot;</span>,</span>
<span id="cb66-59"><a href="ChapModelSelection.html#cb66-59" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="ChapModelSelection.html#cb67-1" tabindex="-1"></a><span class="co"># fit gamma models</span></span>
<span id="cb67-2"><a href="ChapModelSelection.html#cb67-2" tabindex="-1"></a>model0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb67-3"><a href="ChapModelSelection.html#cb67-3" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(y <span class="sc">~</span> x1, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb67-4"><a href="ChapModelSelection.html#cb67-4" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(y <span class="sc">~</span> x2, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb67-5"><a href="ChapModelSelection.html#cb67-5" tabindex="-1"></a></span>
<span id="cb67-6"><a href="ChapModelSelection.html#cb67-6" tabindex="-1"></a><span class="co"># calculate Rmse and MAE based on the predicted mean from gamma distributions</span></span>
<span id="cb67-7"><a href="ChapModelSelection.html#cb67-7" tabindex="-1"></a>Rmse.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model0))</span>
<span id="cb67-8"><a href="ChapModelSelection.html#cb67-8" tabindex="-1"></a>Rmse.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model1))</span>
<span id="cb67-9"><a href="ChapModelSelection.html#cb67-9" tabindex="-1"></a>Rmse.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model2))</span>
<span id="cb67-10"><a href="ChapModelSelection.html#cb67-10" tabindex="-1"></a>Rmse.test[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model0, test))</span>
<span id="cb67-11"><a href="ChapModelSelection.html#cb67-11" tabindex="-1"></a>Rmse.test[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model1, test))</span>
<span id="cb67-12"><a href="ChapModelSelection.html#cb67-12" tabindex="-1"></a>Rmse.test[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model2, test))</span>
<span id="cb67-13"><a href="ChapModelSelection.html#cb67-13" tabindex="-1"></a></span>
<span id="cb67-14"><a href="ChapModelSelection.html#cb67-14" tabindex="-1"></a>mae.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model0))</span>
<span id="cb67-15"><a href="ChapModelSelection.html#cb67-15" tabindex="-1"></a>mae.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model1))</span>
<span id="cb67-16"><a href="ChapModelSelection.html#cb67-16" tabindex="-1"></a>mae.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model2))</span>
<span id="cb67-17"><a href="ChapModelSelection.html#cb67-17" tabindex="-1"></a>mae.test[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model0, test))</span>
<span id="cb67-18"><a href="ChapModelSelection.html#cb67-18" tabindex="-1"></a>mae.test[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model1, test))</span>
<span id="cb67-19"><a href="ChapModelSelection.html#cb67-19" tabindex="-1"></a>mae.test[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model2, test))</span>
<span id="cb67-20"><a href="ChapModelSelection.html#cb67-20" tabindex="-1"></a></span>
<span id="cb67-21"><a href="ChapModelSelection.html#cb67-21" tabindex="-1"></a>AIC.train[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model0)</span>
<span id="cb67-22"><a href="ChapModelSelection.html#cb67-22" tabindex="-1"></a>AIC.train[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model1)</span>
<span id="cb67-23"><a href="ChapModelSelection.html#cb67-23" tabindex="-1"></a>AIC.train[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model2)</span>
<span id="cb67-24"><a href="ChapModelSelection.html#cb67-24" tabindex="-1"></a></span>
<span id="cb67-25"><a href="ChapModelSelection.html#cb67-25" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(Rmse.train, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(Rmse.test, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(mae.train,</span>
<span id="cb67-26"><a href="ChapModelSelection.html#cb67-26" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(mae.test, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(AIC.train, <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb67-27"><a href="ChapModelSelection.html#cb67-27" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Community Rating&quot;</span>, <span class="st">&quot;Two Levels&quot;</span>, <span class="st">&quot;Six Levels&quot;</span>)</span>
<span id="cb67-28"><a href="ChapModelSelection.html#cb67-28" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rmse - Train&quot;</span>, <span class="st">&quot;Rmse - Test&quot;</span>, <span class="st">&quot;MAE - Train&quot;</span>, <span class="st">&quot;MAE - Test&quot;</span>,</span>
<span id="cb67-29"><a href="ChapModelSelection.html#cb67-29" tabindex="-1"></a>    <span class="st">&quot;AIC - Train&quot;</span>)</span>
<span id="cb67-30"><a href="ChapModelSelection.html#cb67-30" tabindex="-1"></a></span>
<span id="cb67-31"><a href="ChapModelSelection.html#cb67-31" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Model Selection based on in-sample AIC and out-of-sample MSE and MAE from gamma model&quot;</span>,</span>
<span id="cb67-32"><a href="ChapModelSelection.html#cb67-32" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
</div>
</div>
<div id="S:Sec65" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Model Selection Based on Cross-Validation<a href="ChapModelSelection.html#S:Sec65" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Although out-of-sample validation is the gold standard in predictive
modeling, it is not always practical to do so. The main reason is that
we have limited sample sizes and the out-of-sample model selection
criterion in equation <a href="ChapModelSelection.html#eq:OutSampleCriter">(6.1)</a> depends on a <em>random</em>
split of the data. This means that different analysts, even when working
the same dataset and same approach to modeling, may select different
models. This is likely in actuarial applications because we work with
skewed datasets where there is a large chance of getting some very large
outcomes and large outcomes may have a great influence on the parameter
estimates.</p>
<p><strong>Cross-Validation Procedure.</strong> Alternatively, one may use
<em>cross-validation</em>, as follows.</p>
<ul>
<li>The procedure begins by using a random mechanism to split the data
into <span class="math inline">\(K\)</span> subsets of roughly equal size known as <em>folds</em>, where
analysts typically use 5 to 10.</li>
<li>Next, one uses the first <span class="math inline">\(K\)</span>-1 subsamples to estimate model
parameters. Then, predict the outcomes for the <span class="math inline">\(K\)</span>th subsample and
use a measure such as in equation <a href="ChapModelSelection.html#eq:OutSampleCriter">(6.1)</a> to
summarize the fit.</li>
<li>Now, repeat this by holding out each of the <span class="math inline">\(K\)</span> subsamples,
summarizing with an out-of-sample statistic. Thus, summarize these
<span class="math inline">\(K\)</span> statistics, typically by averaging, to give a single overall
statistic for comparison purposes.</li>
</ul>
<p>Repeat these steps for several candidate models and choose the model
with the lowest overall cross-validation statistic.</p>
<p>In Example 2.3.1, you have seen that the MSE criteria seems to work with
k-fold cross-validation in selecting the correct mean structure for
claims outcome data generated from linear models with constant variance.
From Examples 6.4.3 and 6.4.4, however, the out-of-sample MSE and MAE
criterion does not seem to provide consistent performance for selecting
the distributional form and the mean structure under right-skewed claims
distributions. Thus, we may use the k-folder cross-validation instead of
out-of-sample prediction to see whether the MSE and MAE types of
criterion work for right-skewed distributions based on lognormal and
gamma regression with a log link function.</p>
<hr />
<p><strong>Example 6.5.1. Cross-validation in right-skewed outcomes - lognormal claims</strong> For lognormal claims, we use the data generating mechanism from
Example 6.4.3 to generate a total of 100 samples, and use the k-fold
cross validation procedure in Example 2.3.1 to select the distributional
form and mean structure. Using cross-validation, we note that both AIC
and out-of-sample MSE and MAE seem to be working for selecting the model
with the correct distribution and mean structure, even with a total of
100 samples.</p>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Tab69">Table 6.7: </span><strong>Cross-validation based on in-sample AIC, and out-of-sample MSE and MAE from lognormal model</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Community Rating
</th>
<th style="text-align:center;">
Two Levels
</th>
<th style="text-align:center;">
Six Levels
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 1
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.808
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.750
</td>
<td style="text-align:center;">
1.891
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 2
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.145
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.773
</td>
<td style="text-align:center;">
1.813
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 3
</td>
<td style="text-align:center;min-width: 3.0cm; ">
3.461
</td>
<td style="text-align:center;min-width: 3.0cm; ">
3.335
</td>
<td style="text-align:center;">
3.333
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 4
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.425
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.723
</td>
<td style="text-align:center;">
1.865
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 5
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.848
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.450
</td>
<td style="text-align:center;">
4.454
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.738
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.606
</td>
<td style="text-align:center;">
2.671
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 1
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.341
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.408
</td>
<td style="text-align:center;">
1.502
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 2
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.881
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.264
</td>
<td style="text-align:center;">
1.255
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 3
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.037
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.142
</td>
<td style="text-align:center;">
2.146
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 4
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.225
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.345
</td>
<td style="text-align:center;">
1.476
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 5
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.421
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.022
</td>
<td style="text-align:center;">
2.051
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.781
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.636
</td>
<td style="text-align:center;">
1.686
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
AIC - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
286.257
</td>
<td style="text-align:center;min-width: 3.0cm; ">
266.223
</td>
<td style="text-align:center;">
271.200
</td>
</tr>
</tbody>
</table>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Tab610">Table 6.8: </span><strong>Cross-validation based on in-sample AIC, and out-of-sample MSE and MAE from gamma model</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Community Rating
</th>
<th style="text-align:center;">
Two Levels
</th>
<th style="text-align:center;">
Six Levels
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 1
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.557
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.642
</td>
<td style="text-align:center;">
2.677
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 2
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.930
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.999
</td>
<td style="text-align:center;">
2.005
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 3
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.088
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.155
</td>
<td style="text-align:center;">
4.187
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 4
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.181
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.273
</td>
<td style="text-align:center;">
1.318
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 5
</td>
<td style="text-align:center;min-width: 3.0cm; ">
5.232
</td>
<td style="text-align:center;min-width: 3.0cm; ">
5.262
</td>
<td style="text-align:center;">
5.286
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.998
</td>
<td style="text-align:center;min-width: 3.0cm; ">
3.066
</td>
<td style="text-align:center;">
3.095
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 1
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.929
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.069
</td>
<td style="text-align:center;">
2.114
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 2
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.060
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.116
</td>
<td style="text-align:center;">
1.124
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 3
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.488
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.660
</td>
<td style="text-align:center;">
2.725
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 4
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.887
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.949
</td>
<td style="text-align:center;">
0.999
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 5
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.251
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.312
</td>
<td style="text-align:center;">
2.345
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.723
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.821
</td>
<td style="text-align:center;">
1.861
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
AIC - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
299.063
</td>
<td style="text-align:center;min-width: 3.0cm; ">
281.455
</td>
<td style="text-align:center;">
282.816
</td>
</tr>
</tbody>
</table>
<h5 style="text-align: center;">
<a id="displayCode.Example651.Hide" href="javascript:togglecode('toggleCode.Example651.Hide','displayCode.Example651.Hide');"><i><strong>Show R Code for Example 6.5.1</strong></i></a>
</h5>
<div id="toggleCode.Example651.Hide" style="display: none">
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="ChapModelSelection.html#cb68-1" tabindex="-1"></a><span class="fu">library</span>(Metrics)</span>
<span id="cb68-2"><a href="ChapModelSelection.html#cb68-2" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb68-3"><a href="ChapModelSelection.html#cb68-3" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb68-4"><a href="ChapModelSelection.html#cb68-4" tabindex="-1"></a>u <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">6</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-5"><a href="ChapModelSelection.html#cb68-5" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>((u <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">+</span> (u <span class="sc">==</span> <span class="dv">5</span>))</span>
<span id="cb68-6"><a href="ChapModelSelection.html#cb68-6" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(u)</span>
<span id="cb68-7"><a href="ChapModelSelection.html#cb68-7" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">*</span> (x1 <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">rnorm</span>(n, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb68-8"><a href="ChapModelSelection.html#cb68-8" tabindex="-1"></a>exp.y <span class="ot">&lt;-</span> <span class="fu">exp</span>(y)</span>
<span id="cb68-9"><a href="ChapModelSelection.html#cb68-9" tabindex="-1"></a>xyData <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x1, x2, y, exp.y)</span>
<span id="cb68-10"><a href="ChapModelSelection.html#cb68-10" tabindex="-1"></a></span>
<span id="cb68-11"><a href="ChapModelSelection.html#cb68-11" tabindex="-1"></a><span class="co"># Number of folds</span></span>
<span id="cb68-12"><a href="ChapModelSelection.html#cb68-12" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb68-13"><a href="ChapModelSelection.html#cb68-13" tabindex="-1"></a>splt <span class="ot">&lt;-</span> <span class="fu">split</span>(<span class="fu">sample</span>(n), <span class="dv">1</span><span class="sc">:</span>k)</span>
<span id="cb68-14"><a href="ChapModelSelection.html#cb68-14" tabindex="-1"></a>Rmse.mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> k, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="ot">-&gt;</span> MAE.mat <span class="ot">-&gt;</span> AIC.mat</span>
<span id="cb68-15"><a href="ChapModelSelection.html#cb68-15" tabindex="-1"></a></span>
<span id="cb68-16"><a href="ChapModelSelection.html#cb68-16" tabindex="-1"></a><span class="co"># lognormal model</span></span>
<span id="cb68-17"><a href="ChapModelSelection.html#cb68-17" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k) {</span>
<span id="cb68-18"><a href="ChapModelSelection.html#cb68-18" tabindex="-1"></a>    test.id <span class="ot">&lt;-</span> splt[[i]]</span>
<span id="cb68-19"><a href="ChapModelSelection.html#cb68-19" tabindex="-1"></a>    test <span class="ot">&lt;-</span> xyData[test.id, ]</span>
<span id="cb68-20"><a href="ChapModelSelection.html#cb68-20" tabindex="-1"></a>    train <span class="ot">&lt;-</span> xyData[<span class="sc">-</span>test.id, ]</span>
<span id="cb68-21"><a href="ChapModelSelection.html#cb68-21" tabindex="-1"></a>    model0 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train)</span>
<span id="cb68-22"><a href="ChapModelSelection.html#cb68-22" tabindex="-1"></a>    model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x1, <span class="at">data =</span> train)</span>
<span id="cb68-23"><a href="ChapModelSelection.html#cb68-23" tabindex="-1"></a>    model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x2, <span class="at">data =</span> train)</span>
<span id="cb68-24"><a href="ChapModelSelection.html#cb68-24" tabindex="-1"></a></span>
<span id="cb68-25"><a href="ChapModelSelection.html#cb68-25" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0, test) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb68-26"><a href="ChapModelSelection.html#cb68-26" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1, test) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb68-27"><a href="ChapModelSelection.html#cb68-27" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2, test) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb68-28"><a href="ChapModelSelection.html#cb68-28" tabindex="-1"></a>    MAE.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0, test) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb68-29"><a href="ChapModelSelection.html#cb68-29" tabindex="-1"></a>    MAE.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1, test) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb68-30"><a href="ChapModelSelection.html#cb68-30" tabindex="-1"></a>    MAE.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2, test) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb68-31"><a href="ChapModelSelection.html#cb68-31" tabindex="-1"></a>    AIC.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model0<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model0),</span>
<span id="cb68-32"><a href="ChapModelSelection.html#cb68-32" tabindex="-1"></a>        <span class="fu">sigma</span>(model0), <span class="at">log =</span> T))</span>
<span id="cb68-33"><a href="ChapModelSelection.html#cb68-33" tabindex="-1"></a>    AIC.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model1<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model1),</span>
<span id="cb68-34"><a href="ChapModelSelection.html#cb68-34" tabindex="-1"></a>        <span class="fu">sigma</span>(model1), <span class="at">log =</span> T))</span>
<span id="cb68-35"><a href="ChapModelSelection.html#cb68-35" tabindex="-1"></a>    AIC.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model2<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model2),</span>
<span id="cb68-36"><a href="ChapModelSelection.html#cb68-36" tabindex="-1"></a>        <span class="fu">sigma</span>(model2), <span class="at">log =</span> T))</span>
<span id="cb68-37"><a href="ChapModelSelection.html#cb68-37" tabindex="-1"></a>}</span>
<span id="cb68-38"><a href="ChapModelSelection.html#cb68-38" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(Rmse.mat, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(Rmse.mat), <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb68-39"><a href="ChapModelSelection.html#cb68-39" tabindex="-1"></a>    <span class="fu">round</span>(MAE.mat, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(MAE.mat), <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(AIC.mat),</span>
<span id="cb68-40"><a href="ChapModelSelection.html#cb68-40" tabindex="-1"></a>        <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb68-41"><a href="ChapModelSelection.html#cb68-41" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Community Rating&quot;</span>, <span class="st">&quot;Two Levels&quot;</span>, <span class="st">&quot;Six Levels&quot;</span>)</span>
<span id="cb68-42"><a href="ChapModelSelection.html#cb68-42" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rmse - Fold 1&quot;</span>, <span class="st">&quot;Rmse - Fold 2&quot;</span>, <span class="st">&quot;Rmse - Fold 3&quot;</span>, <span class="st">&quot;Rmse - Fold 4&quot;</span>,</span>
<span id="cb68-43"><a href="ChapModelSelection.html#cb68-43" tabindex="-1"></a>    <span class="st">&quot;Rmse - Fold 5&quot;</span>, <span class="st">&quot;Rmse - Average&quot;</span>, <span class="st">&quot;MAE - Fold 1&quot;</span>, <span class="st">&quot;MAE - Fold 2&quot;</span>, <span class="st">&quot;MAE - Fold 3&quot;</span>,</span>
<span id="cb68-44"><a href="ChapModelSelection.html#cb68-44" tabindex="-1"></a>    <span class="st">&quot;MAE - Fold 4&quot;</span>, <span class="st">&quot;MAE - Fold 5&quot;</span>, <span class="st">&quot;MAE - Average&quot;</span>, <span class="st">&quot;AIC - Average&quot;</span>)</span>
<span id="cb68-45"><a href="ChapModelSelection.html#cb68-45" tabindex="-1"></a></span>
<span id="cb68-46"><a href="ChapModelSelection.html#cb68-46" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Cross-validation based on in-sample AIC, and out-of-sample MSE and MAE from lognormal model&quot;</span>,</span>
<span id="cb68-47"><a href="ChapModelSelection.html#cb68-47" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="ChapModelSelection.html#cb69-1" tabindex="-1"></a><span class="co"># gamma model</span></span>
<span id="cb69-2"><a href="ChapModelSelection.html#cb69-2" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k) {</span>
<span id="cb69-3"><a href="ChapModelSelection.html#cb69-3" tabindex="-1"></a>    test.id <span class="ot">&lt;-</span> splt[[i]]</span>
<span id="cb69-4"><a href="ChapModelSelection.html#cb69-4" tabindex="-1"></a>    test <span class="ot">&lt;-</span> xyData[test.id, ]</span>
<span id="cb69-5"><a href="ChapModelSelection.html#cb69-5" tabindex="-1"></a>    train <span class="ot">&lt;-</span> xyData[<span class="sc">-</span>test.id, ]</span>
<span id="cb69-6"><a href="ChapModelSelection.html#cb69-6" tabindex="-1"></a>    model0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(exp.y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb69-7"><a href="ChapModelSelection.html#cb69-7" tabindex="-1"></a>    model1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(exp.y <span class="sc">~</span> x1, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb69-8"><a href="ChapModelSelection.html#cb69-8" tabindex="-1"></a>    model2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(exp.y <span class="sc">~</span> x2, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb69-9"><a href="ChapModelSelection.html#cb69-9" tabindex="-1"></a></span>
<span id="cb69-10"><a href="ChapModelSelection.html#cb69-10" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model0))</span>
<span id="cb69-11"><a href="ChapModelSelection.html#cb69-11" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model1))</span>
<span id="cb69-12"><a href="ChapModelSelection.html#cb69-12" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model2))</span>
<span id="cb69-13"><a href="ChapModelSelection.html#cb69-13" tabindex="-1"></a>    MAE.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model0))</span>
<span id="cb69-14"><a href="ChapModelSelection.html#cb69-14" tabindex="-1"></a>    MAE.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model1))</span>
<span id="cb69-15"><a href="ChapModelSelection.html#cb69-15" tabindex="-1"></a>    MAE.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>exp.y, <span class="fu">predict</span>(model2))</span>
<span id="cb69-16"><a href="ChapModelSelection.html#cb69-16" tabindex="-1"></a>    AIC.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model0)</span>
<span id="cb69-17"><a href="ChapModelSelection.html#cb69-17" tabindex="-1"></a>    AIC.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model1)</span>
<span id="cb69-18"><a href="ChapModelSelection.html#cb69-18" tabindex="-1"></a>    AIC.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model2)</span>
<span id="cb69-19"><a href="ChapModelSelection.html#cb69-19" tabindex="-1"></a>}</span>
<span id="cb69-20"><a href="ChapModelSelection.html#cb69-20" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(Rmse.mat, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(Rmse.mat), <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb69-21"><a href="ChapModelSelection.html#cb69-21" tabindex="-1"></a>    <span class="fu">round</span>(MAE.mat, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(MAE.mat), <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(AIC.mat),</span>
<span id="cb69-22"><a href="ChapModelSelection.html#cb69-22" tabindex="-1"></a>        <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb69-23"><a href="ChapModelSelection.html#cb69-23" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Community Rating&quot;</span>, <span class="st">&quot;Two Levels&quot;</span>, <span class="st">&quot;Six Levels&quot;</span>)</span>
<span id="cb69-24"><a href="ChapModelSelection.html#cb69-24" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rmse - Fold 1&quot;</span>, <span class="st">&quot;Rmse - Fold 2&quot;</span>, <span class="st">&quot;Rmse - Fold 3&quot;</span>, <span class="st">&quot;Rmse - Fold 4&quot;</span>,</span>
<span id="cb69-25"><a href="ChapModelSelection.html#cb69-25" tabindex="-1"></a>    <span class="st">&quot;Rmse - Fold 5&quot;</span>, <span class="st">&quot;Rmse - Average&quot;</span>, <span class="st">&quot;MAE - Fold 1&quot;</span>, <span class="st">&quot;MAE - Fold 2&quot;</span>, <span class="st">&quot;MAE - Fold 3&quot;</span>,</span>
<span id="cb69-26"><a href="ChapModelSelection.html#cb69-26" tabindex="-1"></a>    <span class="st">&quot;MAE - Fold 4&quot;</span>, <span class="st">&quot;MAE - Fold 5&quot;</span>, <span class="st">&quot;MAE - Average&quot;</span>, <span class="st">&quot;AIC - Average&quot;</span>)</span>
<span id="cb69-27"><a href="ChapModelSelection.html#cb69-27" tabindex="-1"></a></span>
<span id="cb69-28"><a href="ChapModelSelection.html#cb69-28" tabindex="-1"></a></span>
<span id="cb69-29"><a href="ChapModelSelection.html#cb69-29" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Cross-validation based on in-sample AIC, and out-of-sample MSE and MAE from gamma model&quot;</span>,</span>
<span id="cb69-30"><a href="ChapModelSelection.html#cb69-30" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
</div>
<hr />
<p><strong>Example 6.5.2. Cross-validation in right-skewed outcomes - gamma claims</strong> For gamma claims, we use the data generating mechanism from
Example 6.4.4 to generate a total of 100 samples, and use the <span class="math inline">\(k\)</span>-fold
cross validation procedure to select the distributional form and mean
structure. Using cross-validation, we note that in-sample AIC seems to
be working for selecting the model with the correct distribution and
mean structure, while out-of-sample MSE and MAE seem to fail in
selecting the distributional form or the mean structure correctly even
after we increase the sample size to 1000.</p>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Tab611">Table 6.9: </span><strong>Cross-validation based on in-sample AIC, and out-of-sample MSE and MAE from lognormal model</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Community Rating
</th>
<th style="text-align:center;">
Two Levels
</th>
<th style="text-align:center;">
Six Levels
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 1
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.080
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.794
</td>
<td style="text-align:center;">
0.799
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 2
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.953
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.639
</td>
<td style="text-align:center;">
0.639
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 3
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.354
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.914
</td>
<td style="text-align:center;">
0.916
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 4
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.097
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.725
</td>
<td style="text-align:center;">
0.727
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 5
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.171
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.695
</td>
<td style="text-align:center;">
0.695
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.131
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.753
</td>
<td style="text-align:center;">
0.755
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 1
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.837
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.579
</td>
<td style="text-align:center;">
0.583
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 2
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.755
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.473
</td>
<td style="text-align:center;">
0.474
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 3
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.952
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.600
</td>
<td style="text-align:center;">
0.602
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 4
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.852
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.523
</td>
<td style="text-align:center;">
0.525
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 5
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.897
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.503
</td>
<td style="text-align:center;">
0.507
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.859
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.536
</td>
<td style="text-align:center;">
0.538
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
AIC - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1980.018
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1381.321
</td>
<td style="text-align:center;">
1388.351
</td>
</tr>
</tbody>
</table>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Tab612">Table 6.10: </span><strong>Cross-validation based on in-sample AIC, and out-of-sample MSE and MAE from gamma model</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Community Rating
</th>
<th style="text-align:center;">
Two Levels
</th>
<th style="text-align:center;">
Six Levels
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 1
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.455
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.620
</td>
<td style="text-align:center;">
1.620
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 2
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.347
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.543
</td>
<td style="text-align:center;">
1.543
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 3
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.865
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2.006
</td>
<td style="text-align:center;">
2.005
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 4
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.558
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.738
</td>
<td style="text-align:center;">
1.738
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Fold 5
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.690
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.838
</td>
<td style="text-align:center;">
1.838
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Rmse - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.583
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.749
</td>
<td style="text-align:center;">
1.749
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 1
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.003
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.223
</td>
<td style="text-align:center;">
1.223
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 2
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.975
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.195
</td>
<td style="text-align:center;">
1.195
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 3
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.301
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.478
</td>
<td style="text-align:center;">
1.479
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 4
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.118
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.342
</td>
<td style="text-align:center;">
1.342
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Fold 5
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.228
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.420
</td>
<td style="text-align:center;">
1.420
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
MAE - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.125
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.332
</td>
<td style="text-align:center;">
1.332
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
AIC - Average
</td>
<td style="text-align:center;min-width: 3.0cm; ">
2047.108
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1349.855
</td>
<td style="text-align:center;">
1357.246
</td>
</tr>
</tbody>
</table>
<h5 style="text-align: center;">
<a id="displayCode.Example652.Hide" href="javascript:togglecode('toggleCode.Example652.Hide','displayCode.Example652.Hide');"><i><strong>Show R Code for Example 6.5.2</strong></i></a>
</h5>
<div id="toggleCode.Example652.Hide" style="display: none">
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="ChapModelSelection.html#cb70-1" tabindex="-1"></a><span class="fu">library</span>(Metrics)</span>
<span id="cb70-2"><a href="ChapModelSelection.html#cb70-2" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb70-3"><a href="ChapModelSelection.html#cb70-3" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb70-4"><a href="ChapModelSelection.html#cb70-4" tabindex="-1"></a>u <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">6</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb70-5"><a href="ChapModelSelection.html#cb70-5" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>((u <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">+</span> (u <span class="sc">==</span> <span class="dv">5</span>))</span>
<span id="cb70-6"><a href="ChapModelSelection.html#cb70-6" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(u)</span>
<span id="cb70-7"><a href="ChapModelSelection.html#cb70-7" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">as.numeric</span>(x1 <span class="sc">==</span> <span class="dv">1</span>))  <span class="co"># gamma mean</span></span>
<span id="cb70-8"><a href="ChapModelSelection.html#cb70-8" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb70-9"><a href="ChapModelSelection.html#cb70-9" tabindex="-1"></a>beta <span class="ot">&lt;-</span> alpha<span class="sc">/</span>mu</span>
<span id="cb70-10"><a href="ChapModelSelection.html#cb70-10" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rgamma</span>(n, alpha, beta)</span>
<span id="cb70-11"><a href="ChapModelSelection.html#cb70-11" tabindex="-1"></a>log.y <span class="ot">&lt;-</span> <span class="fu">log</span>(y)</span>
<span id="cb70-12"><a href="ChapModelSelection.html#cb70-12" tabindex="-1"></a>xyData <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x1, x2, y, log.y)</span>
<span id="cb70-13"><a href="ChapModelSelection.html#cb70-13" tabindex="-1"></a></span>
<span id="cb70-14"><a href="ChapModelSelection.html#cb70-14" tabindex="-1"></a><span class="co"># Number of folds</span></span>
<span id="cb70-15"><a href="ChapModelSelection.html#cb70-15" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb70-16"><a href="ChapModelSelection.html#cb70-16" tabindex="-1"></a>splt <span class="ot">&lt;-</span> <span class="fu">split</span>(<span class="fu">sample</span>(n), <span class="dv">1</span><span class="sc">:</span>k)</span>
<span id="cb70-17"><a href="ChapModelSelection.html#cb70-17" tabindex="-1"></a>Rmse.mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> k, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="ot">-&gt;</span> MAE.mat <span class="ot">-&gt;</span> AIC.mat</span>
<span id="cb70-18"><a href="ChapModelSelection.html#cb70-18" tabindex="-1"></a></span>
<span id="cb70-19"><a href="ChapModelSelection.html#cb70-19" tabindex="-1"></a><span class="co"># lognormal model</span></span>
<span id="cb70-20"><a href="ChapModelSelection.html#cb70-20" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k) {</span>
<span id="cb70-21"><a href="ChapModelSelection.html#cb70-21" tabindex="-1"></a>    test.id <span class="ot">&lt;-</span> splt[[i]]</span>
<span id="cb70-22"><a href="ChapModelSelection.html#cb70-22" tabindex="-1"></a>    test <span class="ot">&lt;-</span> xyData[test.id, ]</span>
<span id="cb70-23"><a href="ChapModelSelection.html#cb70-23" tabindex="-1"></a>    train <span class="ot">&lt;-</span> xyData[<span class="sc">-</span>test.id, ]</span>
<span id="cb70-24"><a href="ChapModelSelection.html#cb70-24" tabindex="-1"></a>    model0 <span class="ot">&lt;-</span> <span class="fu">lm</span>(log.y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train)</span>
<span id="cb70-25"><a href="ChapModelSelection.html#cb70-25" tabindex="-1"></a>    model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(log.y <span class="sc">~</span> x1, <span class="at">data =</span> train)</span>
<span id="cb70-26"><a href="ChapModelSelection.html#cb70-26" tabindex="-1"></a>    model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(log.y <span class="sc">~</span> x2, <span class="at">data =</span> train)</span>
<span id="cb70-27"><a href="ChapModelSelection.html#cb70-27" tabindex="-1"></a></span>
<span id="cb70-28"><a href="ChapModelSelection.html#cb70-28" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0, test) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb70-29"><a href="ChapModelSelection.html#cb70-29" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1, test) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb70-30"><a href="ChapModelSelection.html#cb70-30" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2, test) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb70-31"><a href="ChapModelSelection.html#cb70-31" tabindex="-1"></a>    MAE.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model0, test) <span class="sc">+</span> <span class="fu">sigma</span>(model0)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb70-32"><a href="ChapModelSelection.html#cb70-32" tabindex="-1"></a>    MAE.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model1, test) <span class="sc">+</span> <span class="fu">sigma</span>(model1)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb70-33"><a href="ChapModelSelection.html#cb70-33" tabindex="-1"></a>    MAE.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">exp</span>(<span class="fu">predict</span>(model2, test) <span class="sc">+</span> <span class="fu">sigma</span>(model2)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb70-34"><a href="ChapModelSelection.html#cb70-34" tabindex="-1"></a>    AIC.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model0<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model0),</span>
<span id="cb70-35"><a href="ChapModelSelection.html#cb70-35" tabindex="-1"></a>        <span class="fu">sigma</span>(model0), <span class="at">log =</span> T))</span>
<span id="cb70-36"><a href="ChapModelSelection.html#cb70-36" tabindex="-1"></a>    AIC.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model1<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model1),</span>
<span id="cb70-37"><a href="ChapModelSelection.html#cb70-37" tabindex="-1"></a>        <span class="fu">sigma</span>(model1), <span class="at">log =</span> T))</span>
<span id="cb70-38"><a href="ChapModelSelection.html#cb70-38" tabindex="-1"></a>    AIC.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (model2<span class="sc">$</span>rank <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sum</span>(<span class="fu">dlnorm</span>(train<span class="sc">$</span>y, <span class="fu">predict</span>(model2),</span>
<span id="cb70-39"><a href="ChapModelSelection.html#cb70-39" tabindex="-1"></a>        <span class="fu">sigma</span>(model2), <span class="at">log =</span> T))</span>
<span id="cb70-40"><a href="ChapModelSelection.html#cb70-40" tabindex="-1"></a>}</span>
<span id="cb70-41"><a href="ChapModelSelection.html#cb70-41" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(Rmse.mat, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(Rmse.mat), <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb70-42"><a href="ChapModelSelection.html#cb70-42" tabindex="-1"></a>    <span class="fu">round</span>(MAE.mat, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(MAE.mat), <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(AIC.mat),</span>
<span id="cb70-43"><a href="ChapModelSelection.html#cb70-43" tabindex="-1"></a>        <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb70-44"><a href="ChapModelSelection.html#cb70-44" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Community Rating&quot;</span>, <span class="st">&quot;Two Levels&quot;</span>, <span class="st">&quot;Six Levels&quot;</span>)</span>
<span id="cb70-45"><a href="ChapModelSelection.html#cb70-45" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rmse - Fold 1&quot;</span>, <span class="st">&quot;Rmse - Fold 2&quot;</span>, <span class="st">&quot;Rmse - Fold 3&quot;</span>, <span class="st">&quot;Rmse - Fold 4&quot;</span>,</span>
<span id="cb70-46"><a href="ChapModelSelection.html#cb70-46" tabindex="-1"></a>    <span class="st">&quot;Rmse - Fold 5&quot;</span>, <span class="st">&quot;Rmse - Average&quot;</span>, <span class="st">&quot;MAE - Fold 1&quot;</span>, <span class="st">&quot;MAE - Fold 2&quot;</span>, <span class="st">&quot;MAE - Fold 3&quot;</span>,</span>
<span id="cb70-47"><a href="ChapModelSelection.html#cb70-47" tabindex="-1"></a>    <span class="st">&quot;MAE - Fold 4&quot;</span>, <span class="st">&quot;MAE - Fold 5&quot;</span>, <span class="st">&quot;MAE - Average&quot;</span>, <span class="st">&quot;AIC - Average&quot;</span>)</span>
<span id="cb70-48"><a href="ChapModelSelection.html#cb70-48" tabindex="-1"></a></span>
<span id="cb70-49"><a href="ChapModelSelection.html#cb70-49" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Cross-validation based on in-sample AIC, and out-of-sample MSE and MAE from lognormal model&quot;</span>,</span>
<span id="cb70-50"><a href="ChapModelSelection.html#cb70-50" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="ChapModelSelection.html#cb71-1" tabindex="-1"></a><span class="co"># gamma model</span></span>
<span id="cb71-2"><a href="ChapModelSelection.html#cb71-2" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k) {</span>
<span id="cb71-3"><a href="ChapModelSelection.html#cb71-3" tabindex="-1"></a>    test.id <span class="ot">&lt;-</span> splt[[i]]</span>
<span id="cb71-4"><a href="ChapModelSelection.html#cb71-4" tabindex="-1"></a>    test <span class="ot">&lt;-</span> xyData[test.id, ]</span>
<span id="cb71-5"><a href="ChapModelSelection.html#cb71-5" tabindex="-1"></a>    train <span class="ot">&lt;-</span> xyData[<span class="sc">-</span>test.id, ]</span>
<span id="cb71-6"><a href="ChapModelSelection.html#cb71-6" tabindex="-1"></a>    model0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb71-7"><a href="ChapModelSelection.html#cb71-7" tabindex="-1"></a>    model1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(y <span class="sc">~</span> x1, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb71-8"><a href="ChapModelSelection.html#cb71-8" tabindex="-1"></a>    model2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(y <span class="sc">~</span> x2, <span class="at">data =</span> train, <span class="at">family =</span> <span class="fu">Gamma</span>(<span class="at">link =</span> log))</span>
<span id="cb71-9"><a href="ChapModelSelection.html#cb71-9" tabindex="-1"></a></span>
<span id="cb71-10"><a href="ChapModelSelection.html#cb71-10" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model0))</span>
<span id="cb71-11"><a href="ChapModelSelection.html#cb71-11" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model1))</span>
<span id="cb71-12"><a href="ChapModelSelection.html#cb71-12" tabindex="-1"></a>    Rmse.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">rmse</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model2))</span>
<span id="cb71-13"><a href="ChapModelSelection.html#cb71-13" tabindex="-1"></a>    MAE.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model0))</span>
<span id="cb71-14"><a href="ChapModelSelection.html#cb71-14" tabindex="-1"></a>    MAE.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model1))</span>
<span id="cb71-15"><a href="ChapModelSelection.html#cb71-15" tabindex="-1"></a>    MAE.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">mae</span>(test<span class="sc">$</span>y, <span class="fu">predict</span>(model2))</span>
<span id="cb71-16"><a href="ChapModelSelection.html#cb71-16" tabindex="-1"></a>    AIC.mat[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model0)</span>
<span id="cb71-17"><a href="ChapModelSelection.html#cb71-17" tabindex="-1"></a>    AIC.mat[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model1)</span>
<span id="cb71-18"><a href="ChapModelSelection.html#cb71-18" tabindex="-1"></a>    AIC.mat[i, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model2)</span>
<span id="cb71-19"><a href="ChapModelSelection.html#cb71-19" tabindex="-1"></a>}</span>
<span id="cb71-20"><a href="ChapModelSelection.html#cb71-20" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(Rmse.mat, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(Rmse.mat), <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb71-21"><a href="ChapModelSelection.html#cb71-21" tabindex="-1"></a>    <span class="fu">round</span>(MAE.mat, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(MAE.mat), <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(<span class="fu">colMeans</span>(AIC.mat),</span>
<span id="cb71-22"><a href="ChapModelSelection.html#cb71-22" tabindex="-1"></a>        <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb71-23"><a href="ChapModelSelection.html#cb71-23" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Community Rating&quot;</span>, <span class="st">&quot;Two Levels&quot;</span>, <span class="st">&quot;Six Levels&quot;</span>)</span>
<span id="cb71-24"><a href="ChapModelSelection.html#cb71-24" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rmse - Fold 1&quot;</span>, <span class="st">&quot;Rmse - Fold 2&quot;</span>, <span class="st">&quot;Rmse - Fold 3&quot;</span>, <span class="st">&quot;Rmse - Fold 4&quot;</span>,</span>
<span id="cb71-25"><a href="ChapModelSelection.html#cb71-25" tabindex="-1"></a>    <span class="st">&quot;Rmse - Fold 5&quot;</span>, <span class="st">&quot;Rmse - Average&quot;</span>, <span class="st">&quot;MAE - Fold 1&quot;</span>, <span class="st">&quot;MAE - Fold 2&quot;</span>, <span class="st">&quot;MAE - Fold 3&quot;</span>,</span>
<span id="cb71-26"><a href="ChapModelSelection.html#cb71-26" tabindex="-1"></a>    <span class="st">&quot;MAE - Fold 4&quot;</span>, <span class="st">&quot;MAE - Fold 5&quot;</span>, <span class="st">&quot;MAE - Average&quot;</span>, <span class="st">&quot;AIC - Average&quot;</span>)</span>
<span id="cb71-27"><a href="ChapModelSelection.html#cb71-27" tabindex="-1"></a></span>
<span id="cb71-28"><a href="ChapModelSelection.html#cb71-28" tabindex="-1"></a></span>
<span id="cb71-29"><a href="ChapModelSelection.html#cb71-29" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Cross-validation based on in-sample AIC, and out-of-sample MSE and MAE from gamma model&quot;</span>,</span>
<span id="cb71-30"><a href="ChapModelSelection.html#cb71-30" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
</div>
<p>Cross-validation is widely used because it retains the predictive flavor
of the out-of-sample model validation process but, due to the re-use of
the data, is more stable over random samples. In addition, Example
8.4.1 in Chapter <a href="ChapSimulation.html#ChapSimulation">8</a> uses the Wisconsin Property Fund to
perform k-fold cross-validation of the gamma and Pareto models based on
the Kolmogorov-Smirnov goodness of fit statistic. Additional information
and examples regarding re-sampling procedures including leave-one-out
cross-validation and bootstrap can also be found in Chapter
<a href="ChapSimulation.html#ChapSimulation">8</a>.</p>
</div>
<div id="S:Sec66" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Model Selection for Modified Data<a href="ChapModelSelection.html#S:Sec66" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far we have discussed model selection using unmodified data.
For modified data including grouped, censored and truncated data, you
learned parametric and nonparametric estimation of distribution
functions in Chapter <a href="ChapClaimSeverity.html#ChapClaimSeverity">5</a>. For model selection, the
tools from Section <a href="ChapModelSelection.html#S:Sec61">6.1</a> can be extended to cases
of modified data.</p>
<p>For selection of distributions, the nonparametric tools introduced in
Section <a href="ChapModelSelection.html#S:Sec61">6.1</a> are based on estimated
parametric and nonparametric distribution functions, and thus can be
extended to modified data for which both types of estimators exist.</p>
<p>For graphical comparisons, the <span class="math inline">\(pp\)</span> and <span class="math inline">\(qq\)</span> plots introduced earlier
can be created for modified data by plotting the parametric estimates
from Section <a href="ChapClaimSeverity.html#S:Sec52">5.2</a> against nonparametric estimates
of the probability or distribution functions from Section
<a href="ChapClaimSeverity.html#S:Sec53">5.3</a>. For example, the <code>qqPlotCensored</code> and
<code>qqtrunc</code> functions in <code>R</code> generate <span class="math inline">\(qq\)</span> plots respectively for censored
(left or right) and truncated data, whereas the <code>probPlot</code> function
creates both <span class="math inline">\(pp\)</span> and <span class="math inline">\(qq\)</span> plots with a larger selection of
distributions for right-censored and unmodified data. Additional
graphical tools such as cumulative hazard plots are available in the <code>R</code>
package <code>GofCens</code>.</p>
<hr />
<p><strong>Example 6.6.1. Bodily Injury Claims and <span class="math inline">\(qq\)</span>-Plots.</strong> For the Boston auto bodily injury claims data from Example 5.3.2, we include the full dataset with right-censoring, and use the <span class="math inline">\(qq\)</span>-plot to compare the estimated
quantiles from lognormal, normal and exponential distributions with
those from the nonparametric Kaplan-Meier method. From the <span class="math inline">\(qq\)</span>-plots in
Figure <a href="ChapModelSelection.html#fig:Fig67">6.7</a>, the lognormal distribution seems
to fit the censored data much better those based on the normal and
exponential distributions.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:Fig67"></span>
<img src="LDAEd2_files/figure-html/Fig67-1.png" alt="Quantile-Quantile (\(qq\)) Plots for Bodily Injury Claims. The horizontal axis gives the empirical quantiles at each observation. The vertical axis gives the quantiles from the fitted distributions; lognormal quantiles are in the left-hand panel, normal quantiles are in the middle, and exponential in the right-hand panel." width="100%" />
<p class="caption">
Figure 6.7: <strong>Quantile-Quantile (<span class="math inline">\(qq\)</span>) Plots for Bodily Injury Claims.</strong> The horizontal axis gives the empirical quantiles at each observation. The vertical axis gives the quantiles from the fitted distributions; lognormal quantiles are in the left-hand panel, normal quantiles are in the middle, and exponential in the right-hand panel.
</p>
</div>
<h5 style="text-align: center;">
<a id="displayCode.Fig67.4f" href="javascript:togglecode('toggleCode.Fig67.4f','displayCode.Fig67.4f');"><i><strong>Show R Code</strong></i></a>
</h5>
<div id="toggleCode.Fig67.4f" style="display: none">
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="ChapModelSelection.html#cb72-1" tabindex="-1"></a><span class="fu">library</span>(GofCens)</span>
<span id="cb72-2"><a href="ChapModelSelection.html#cb72-2" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb72-3"><a href="ChapModelSelection.html#cb72-3" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb72-4"><a href="ChapModelSelection.html#cb72-4" tabindex="-1"></a><span class="fu">library</span>(gridGraphics)</span>
<span id="cb72-5"><a href="ChapModelSelection.html#cb72-5" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb72-6"><a href="ChapModelSelection.html#cb72-6" tabindex="-1"></a></span>
<span id="cb72-7"><a href="ChapModelSelection.html#cb72-7" tabindex="-1"></a><span class="co"># Example from Derrig et al &#39;Applications of resampling methods in actuarial</span></span>
<span id="cb72-8"><a href="ChapModelSelection.html#cb72-8" tabindex="-1"></a><span class="co"># practice&#39; CAS Proceedings 2001</span></span>
<span id="cb72-9"><a href="ChapModelSelection.html#cb72-9" tabindex="-1"></a>BIData <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Data/DerrigResampling.csv&quot;</span>, <span class="at">header =</span> T)</span>
<span id="cb72-10"><a href="ChapModelSelection.html#cb72-10" tabindex="-1"></a>BIData<span class="sc">$</span>Censored <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">*</span> (BIData<span class="sc">$</span>AmountPaid <span class="sc">&gt;=</span> BIData<span class="sc">$</span>PolicyLimit)</span>
<span id="cb72-11"><a href="ChapModelSelection.html#cb72-11" tabindex="-1"></a>BIDataUncensored <span class="ot">&lt;-</span> <span class="fu">subset</span>(BIData, Censored <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb72-12"><a href="ChapModelSelection.html#cb72-12" tabindex="-1"></a>UnCensored <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">*</span> (BIData<span class="sc">$</span>AmountPaid <span class="sc">&lt;</span> BIData<span class="sc">$</span>PolicyLimit)</span>
<span id="cb72-13"><a href="ChapModelSelection.html#cb72-13" tabindex="-1"></a></span>
<span id="cb72-14"><a href="ChapModelSelection.html#cb72-14" tabindex="-1"></a><span class="do">## qq-plot for lognormal distribution</span></span>
<span id="cb72-15"><a href="ChapModelSelection.html#cb72-15" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> <span class="fu">grid.grabExpr</span>(GofCens<span class="sc">::</span><span class="fu">probPlot</span>(BIData<span class="sc">$</span>AmountPaid, <span class="at">cens =</span> UnCensored, <span class="at">distr =</span> <span class="st">&quot;lognormal&quot;</span>,</span>
<span id="cb72-16"><a href="ChapModelSelection.html#cb72-16" tabindex="-1"></a>    <span class="at">plots =</span> <span class="st">&quot;QQ&quot;</span>, <span class="at">ggp =</span> <span class="cn">TRUE</span>, <span class="at">prnt =</span> <span class="cn">FALSE</span>, <span class="at">mtitle =</span> F, <span class="at">main =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb72-17"><a href="ChapModelSelection.html#cb72-17" tabindex="-1"></a><span class="do">## qq-plot for normal distribution</span></span>
<span id="cb72-18"><a href="ChapModelSelection.html#cb72-18" tabindex="-1"></a>plot2 <span class="ot">&lt;-</span> <span class="fu">grid.grabExpr</span>(GofCens<span class="sc">::</span><span class="fu">probPlot</span>(BIData<span class="sc">$</span>AmountPaid, <span class="at">cens =</span> UnCensored, <span class="at">distr =</span> <span class="st">&quot;normal&quot;</span>,</span>
<span id="cb72-19"><a href="ChapModelSelection.html#cb72-19" tabindex="-1"></a>    <span class="at">plots =</span> <span class="st">&quot;QQ&quot;</span>, <span class="at">ggp =</span> <span class="cn">TRUE</span>, <span class="at">prnt =</span> <span class="cn">FALSE</span>, <span class="at">mtitle =</span> F, <span class="at">main =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb72-20"><a href="ChapModelSelection.html#cb72-20" tabindex="-1"></a><span class="do">## qq-plot for exponential distribution</span></span>
<span id="cb72-21"><a href="ChapModelSelection.html#cb72-21" tabindex="-1"></a>plot3 <span class="ot">&lt;-</span> <span class="fu">grid.grabExpr</span>(GofCens<span class="sc">::</span><span class="fu">probPlot</span>(BIData<span class="sc">$</span>AmountPaid, <span class="at">cens =</span> UnCensored, <span class="at">distr =</span> <span class="st">&quot;exponential&quot;</span>,</span>
<span id="cb72-22"><a href="ChapModelSelection.html#cb72-22" tabindex="-1"></a>    <span class="at">plots =</span> <span class="st">&quot;QQ&quot;</span>, <span class="at">ggp =</span> <span class="cn">TRUE</span>, <span class="at">prnt =</span> <span class="cn">FALSE</span>, <span class="at">mtitle =</span> F, <span class="at">main =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb72-23"><a href="ChapModelSelection.html#cb72-23" tabindex="-1"></a></span>
<span id="cb72-24"><a href="ChapModelSelection.html#cb72-24" tabindex="-1"></a><span class="co"># Arrange the captured plots side by side</span></span>
<span id="cb72-25"><a href="ChapModelSelection.html#cb72-25" tabindex="-1"></a><span class="fu">grid.arrange</span>(plot1, plot2, plot3, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code></pre></div>
</div>
<p>In addition to graphical tools, you may use tools from Section
<a href="ChapModelSelection.html#S:Sec612">6.1.2</a> for statistical comparisons of models fitted
from modified data based on parametric and nonparametric estimates of
distribution functions. For example, the <code>R</code> package <code>GofCens</code> provides
functions calculating the three goodness of fit statistics from Section
<a href="ChapModelSelection.html#S:Sec612">6.1.2</a> for both right-censored and unmodified data. The
<code>R</code> package <code>truncgof</code>, on the other hand, provides functions for
calculating the three goodness of fit statistics for left-truncated
data.</p>
<p><strong>Example 6.6.2. Bodily Injury Claims and Goodness of Fit Stastistics.</strong> For the Boston auto bodily injury claims with right-censoring, we may use the goodness of fit statistics to evaluate the fitted lognormal, normal and exponential distributions. For the Kolmogorov-Smirnov, Cramer-von
Mises and Anderson-Darling statistics, the lognormal distribution gives
values that are much lower than those from normal and exponential
distributions. The conclusion from the goodness of fit statistics is
consistent to that revealed by the <span class="math inline">\(qq\)</span> plots.</p>
<table class=" lightable-classic table table-striped table-condensed" style="font-size: 12px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:Table610">Table 6.11: </span><strong>Nonparametric goodness of fit statistics for right-censored Bodily Injury Claims</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Kolmogorov-Smirnov
</th>
<th style="text-align:center;">
Cramer-von Mises
</th>
<th style="text-align:center;">
Anderson-Darling
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Lognormal
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.994
</td>
<td style="text-align:center;min-width: 3.0cm; ">
0.305
</td>
<td style="text-align:center;">
1.770
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Normal
</td>
<td style="text-align:center;min-width: 3.0cm; ">
3.096
</td>
<td style="text-align:center;min-width: 3.0cm; ">
1.335
</td>
<td style="text-align:center;">
9.437
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 2.5cm; min-width: 3.0cm; ">
Exponential
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.811
</td>
<td style="text-align:center;min-width: 3.0cm; ">
4.065
</td>
<td style="text-align:center;">
21.659
</td>
</tr>
</tbody>
</table>
<h5 style="text-align: center;">
<a id="displayCode.KsCensored.4f" href="javascript:togglecode('toggleCode.KsCensored.4f','displayCode.KsCensored.4f');"><i><strong>Show R Code</strong></i></a>
</h5>
<div id="toggleCode.KsCensored.4f" style="display: none">
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="ChapModelSelection.html#cb73-1" tabindex="-1"></a><span class="fu">library</span>(GofCens)</span>
<span id="cb73-2"><a href="ChapModelSelection.html#cb73-2" tabindex="-1"></a>UnCensored <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">*</span> (BIData<span class="sc">$</span>AmountPaid <span class="sc">&lt;</span> BIData<span class="sc">$</span>PolicyLimit)</span>
<span id="cb73-3"><a href="ChapModelSelection.html#cb73-3" tabindex="-1"></a><span class="co"># par(mfrow=c(2, 2)) Kolmogorov-Smirnov test for lognormal distribution</span></span>
<span id="cb73-4"><a href="ChapModelSelection.html#cb73-4" tabindex="-1"></a>KS.ln <span class="ot">&lt;-</span> <span class="fu">gofcens</span>(BIData<span class="sc">$</span>AmountPaid, <span class="at">cens =</span> UnCensored, <span class="at">distr =</span> <span class="st">&quot;lognormal&quot;</span>)</span>
<span id="cb73-5"><a href="ChapModelSelection.html#cb73-5" tabindex="-1"></a><span class="do">## Kolmogorov-Smirnov test for normal distribution</span></span>
<span id="cb73-6"><a href="ChapModelSelection.html#cb73-6" tabindex="-1"></a>KS.norm <span class="ot">&lt;-</span> <span class="fu">gofcens</span>(BIData<span class="sc">$</span>AmountPaid, <span class="at">cens =</span> UnCensored, <span class="at">distr =</span> <span class="st">&quot;normal&quot;</span>)</span>
<span id="cb73-7"><a href="ChapModelSelection.html#cb73-7" tabindex="-1"></a><span class="do">## Kolmogorov-Smirnov test for exponential distribution</span></span>
<span id="cb73-8"><a href="ChapModelSelection.html#cb73-8" tabindex="-1"></a>KS.exp <span class="ot">&lt;-</span> <span class="fu">gofcens</span>(BIData<span class="sc">$</span>AmountPaid, <span class="at">cens =</span> UnCensored, <span class="at">distr =</span> <span class="st">&quot;exponential&quot;</span>)</span>
<span id="cb73-9"><a href="ChapModelSelection.html#cb73-9" tabindex="-1"></a></span>
<span id="cb73-10"><a href="ChapModelSelection.html#cb73-10" tabindex="-1"></a><span class="fu">save</span>(KS.ln, KS.norm, KS.exp, <span class="at">file =</span> <span class="st">&quot;../IntermediateCalcs/ModelSelectionChapter/Example662.Rdata&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="ChapModelSelection.html#cb74-1" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;IntermediateCalcs/ModelSelectionChapter/Example662.Rdata&quot;</span>)</span>
<span id="cb74-2"><a href="ChapModelSelection.html#cb74-2" tabindex="-1"></a>OutMat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">round</span>(KS.ln<span class="sc">$</span>Test[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(KS.norm<span class="sc">$</span>Test[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb74-3"><a href="ChapModelSelection.html#cb74-3" tabindex="-1"></a>    <span class="fu">round</span>(KS.exp<span class="sc">$</span>Test[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">digits =</span> <span class="dv">3</span>))</span>
<span id="cb74-4"><a href="ChapModelSelection.html#cb74-4" tabindex="-1"></a><span class="fu">colnames</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Kolmogorov-Smirnov&quot;</span>, <span class="st">&quot;Cramer-von Mises&quot;</span>, <span class="st">&quot;Anderson-Darling&quot;</span>)</span>
<span id="cb74-5"><a href="ChapModelSelection.html#cb74-5" tabindex="-1"></a><span class="fu">row.names</span>(OutMat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Lognormal&quot;</span>, <span class="st">&quot;Normal&quot;</span>, <span class="st">&quot;Exponential&quot;</span>)</span>
<span id="cb74-6"><a href="ChapModelSelection.html#cb74-6" tabindex="-1"></a></span>
<span id="cb74-7"><a href="ChapModelSelection.html#cb74-7" tabindex="-1"></a><span class="fu">TableGen1</span>(<span class="at">TableData =</span> OutMat, <span class="at">TextTitle =</span> <span class="st">&quot;Nonparametric goodness of fit statistics for right-censored Bodily Injury Claims&quot;</span>,</span>
<span id="cb74-8"><a href="ChapModelSelection.html#cb74-8" tabindex="-1"></a>    <span class="at">Align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">Digits =</span> <span class="dv">3</span>, <span class="at">ColumnSpec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">ColWidth =</span> ColWidth5)</span></code></pre></div>
</div>
<p>Other than selecting the distributional form, model comparison measures
such as the likelihood ratio test and information criterion including
the AIC from Section <a href="ChapModelSelection.html#S:Sec63">6.3</a> can be obtained
for models fitted based on likelihood criteria based on the likelihood
functions introduced earlier for modified data. For modified data, the
<code>survreg</code> and <code>flexsurvreg</code> functions in <code>R</code> fit parametric regression
models on censored and/or truncated outcomes based on maximum likelihood
estimation which allows use of likelihood ratio tests and information
criterion such as AIC for in-sample model comparisons. For censored and
truncated data, the functions also provide output of residuals that
allow calculation of model validation statistics such as the MSE and MAE
for the iterative model selection procedure introduced in Section
<a href="ChapModelSelection.html#S:Sec62">6.2</a>.</p>
<div id="surveyElement42">

</div>
<div id="surveyResult42">

</div>
<h5 style="text-align: center;">
<a id="display.Quiz42.1" href="javascript:toggleQuiz
('display.Quiz42.2','display.Quiz42.1');"><i><strong>Show Quiz Solution</strong></i></a>
</h5>
<div id="display.Quiz42.2" style="display: none">
<p id="Quiz42Soln">
</p>
<hr />
</div>
<script type="text/javascript" src="./Quizzes/QuizJavascript/Quiz42.js">
</script>
</div>
<div id="further-resources-and-contributors" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> Further Resources and Contributors<a href="ChapModelSelection.html#further-resources-and-contributors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="contributors-5" class="section level4 unnumbered hasAnchor">
<h4>Contributors<a href="ChapModelSelection.html#contributors-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>Lei (Larry) Hua</strong> and <strong>Michelle Xia</strong>, Northern Illinois University, are the principal authors of the second edition of this chapter.</li>
<li><strong>Edward (Jed) Frees</strong> and <strong>Lisa Gao</strong>, University of Wisconsin-Madison, are the principal authors of the initial version of this chapter.</li>
<li>Chapter reviewers include: Vytaras Brazauskas, Yvonne Chueh, Eren
Dodd, Hirokazu (Iwahiro) Iwasawa, Joseph Kim, Andrew Kwon-Nakamura,
Jiandong Ren, and Di (Cindy) Xu.</li>
</ul>
</div>
<div id="further-readings-and-references-3" class="section level4 unnumbered hasAnchor">
<h4>Further Readings and References<a href="ChapModelSelection.html#further-readings-and-references-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If you would like additional practice with <code>R</code> coding, please visit our companion <a href="https://openacttexts.github.io/LDACourse1">LDA Short Course</a>. In particular, see the <a href="https://openacttexts.github.io/LDACourse1/model-selection-and-estimation.html">Model Selection and Estimation Chapter</a>.</p>

<!-- # Chap 1 -->
<!-- # Chap 2 -->
<!-- # Chap 3 -->
<!-- # Chap 4 -->
<!-- # Chap 5 -->
<!-- # Chap 6 -->
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ChapClaimSeverity.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ChapAggLossModels.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["LDAEd2.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
